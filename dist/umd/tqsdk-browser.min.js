!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("http"),require("https"),require("url"),require("assert"),require("stream"),require("tty"),require("util"),require("os"),require("zlib")):"function"==typeof define&&define.amd?define(["http","https","url","assert","stream","tty","util","os","zlib"],t):(e=e||self).TQSDK=t(e.http,e.https,e.url,e.assert,e.stream,e.tty,e.util,e.os,e.zlib)}(this,(function(http,https,url,assert,stream,tty,util,os,zlib){"use strict";http=http&&http.hasOwnProperty("default")?http.default:http,https=https&&https.hasOwnProperty("default")?https.default:https,url=url&&url.hasOwnProperty("default")?url.default:url,assert=assert&&assert.hasOwnProperty("default")?assert.default:assert,stream=stream&&stream.hasOwnProperty("default")?stream.default:stream,tty=tty&&tty.hasOwnProperty("default")?tty.default:tty,util=util&&util.hasOwnProperty("default")?util.default:util,os=os&&os.hasOwnProperty("default")?os.default:os,zlib=zlib&&zlib.hasOwnProperty("default")?zlib.default:zlib;var version="1.1.9",db_version="3",bind=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}},isBuffer_1=function(e){return null!=e&&(isBuffer(e)||isSlowBuffer(e)||!!e._isBuffer)};function isBuffer(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&isBuffer(e.slice(0,0))}var toString=Object.prototype.toString;function isArray(e){return"[object Array]"===toString.call(e)}function isArrayBuffer(e){return"[object ArrayBuffer]"===toString.call(e)}function isFormData(e){return"undefined"!=typeof FormData&&e instanceof FormData}function isArrayBufferView(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function isString(e){return"string"==typeof e}function isNumber(e){return"number"==typeof e}function isUndefined(e){return void 0===e}function isObject(e){return null!==e&&"object"==typeof e}function isDate(e){return"[object Date]"===toString.call(e)}function isFile(e){return"[object File]"===toString.call(e)}function isBlob(e){return"[object Blob]"===toString.call(e)}function isFunction(e){return"[object Function]"===toString.call(e)}function isStream(e){return isObject(e)&&isFunction(e.pipe)}function isURLSearchParams(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function trim(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function isStandardBrowserEnv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function forEach(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),isArray(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function merge(){var e={};function t(t,r){"object"==typeof e[r]&&"object"==typeof t?e[r]=merge(e[r],t):e[r]=t}for(var r=0,n=arguments.length;r<n;r++)forEach(arguments[r],t);return e}function extend(e,t,r){return forEach(t,(function(t,n){e[n]=r&&"function"==typeof t?bind(t,r):t})),e}var utils={isArray:isArray,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer_1,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString,isNumber:isNumber,isObject:isObject,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isFunction:isFunction,isStream:isStream,isURLSearchParams:isURLSearchParams,isStandardBrowserEnv:isStandardBrowserEnv,forEach:forEach,merge:merge,extend:extend,trim:trim},normalizeHeaderName=function(e,t){utils.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))},enhanceError=function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e},createError=function(e,t,r,n,o){var i=new Error(e);return enhanceError(i,t,r,n,o)},settle=function(e,t,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(createError("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)};function encode(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL=function(e,t,r){if(!t)return e;var n;if(r)n=r(t);else if(utils.isURLSearchParams(t))n=t.toString();else{var o=[];utils.forEach(t,(function(e,t){null!=e&&(utils.isArray(e)?t+="[]":e=[e],utils.forEach(e,(function(e){utils.isDate(e)?e=e.toISOString():utils.isObject(e)&&(e=JSON.stringify(e)),o.push(encode(t)+"="+encode(e))})))})),n=o.join("&")}return n&&(e+=(-1===e.indexOf("?")?"?":"&")+n),e},ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],parseHeaders=function(e){var t,r,n,o={};return e?(utils.forEach(e.split("\n"),(function(e){if(n=e.indexOf(":"),t=utils.trim(e.substr(0,n)).toLowerCase(),r=utils.trim(e.substr(n+1)),t){if(o[t]&&ignoreDuplicateOf.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([r]):o[t]?o[t]+", "+r:r}})),o):o},isURLSameOrigin=utils.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(t){var r=utils.isString(t)?n(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0},chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function E(){this.message="String contains an invalid character"}function btoa$1(e){for(var t,r,n=String(e),o="",i=0,s=chars;n.charAt(0|i)||(s="=",i%1);o+=s.charAt(63&t>>8-i%1*8)){if((r=n.charCodeAt(i+=.75))>255)throw new E;t=t<<8|r}return o}E.prototype=new Error,E.prototype.code=5,E.prototype.name="InvalidCharacterError";var btoa_1=btoa$1,cookies=utils.isStandardBrowserEnv()?{write:function(e,t,r,n,o,i){var s=[];s.push(e+"="+encodeURIComponent(t)),utils.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),utils.isString(n)&&s.push("path="+n),utils.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},btoa$2="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||btoa_1,xhr=function(e){return new Promise((function(t,r){var n=e.data,o=e.headers;utils.isFormData(n)&&delete o["Content-Type"];var i=new XMLHttpRequest,s="onreadystatechange",a=!1;if("test"===process.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in i||isURLSameOrigin(e.url)||(i=new window.XDomainRequest,s="onload",a=!0,i.onprogress=function(){},i.ontimeout=function(){}),e.auth){var c=e.auth.username||"",u=e.auth.password||"";o.Authorization="Basic "+btoa$2(c+":"+u)}if(i.open(e.method.toUpperCase(),buildURL(e.url,e.params,e.paramsSerializer),!0),i.timeout=e.timeout,i[s]=function(){if(i&&(4===i.readyState||a)&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in i?parseHeaders(i.getAllResponseHeaders()):null,o={data:e.responseType&&"text"!==e.responseType?i.response:i.responseText,status:1223===i.status?204:i.status,statusText:1223===i.status?"No Content":i.statusText,headers:n,config:e,request:i};settle(t,r,o),i=null}},i.onerror=function(){r(createError("Network Error",e,null,i)),i=null},i.ontimeout=function(){r(createError("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",i)),i=null},utils.isStandardBrowserEnv()){var l=cookies,f=(e.withCredentials||isURLSameOrigin(e.url))&&e.xsrfCookieName?l.read(e.xsrfCookieName):void 0;f&&(o[e.xsrfHeaderName]=f)}if("setRequestHeader"in i&&utils.forEach(o,(function(e,t){void 0===n&&"content-type"===t.toLowerCase()?delete o[t]:i.setRequestHeader(t,e)})),e.withCredentials&&(i.withCredentials=!0),e.responseType)try{i.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&i.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&i.upload&&i.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){i&&(i.abort(),r(e),i=null)})),void 0===n&&(n=null),i.send(n)}))},commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}function getCjsExportFromNamespace(e){return e&&e.default||e}var s=1e3,m=60*s,h=60*m,d=24*h,w=7*d,y=365.25*d,ms=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse(e);if("number"===r&&!1===isNaN(e))return t.long?fmtLong(e):fmtShort(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y;case"weeks":case"week":case"w":return r*w;case"days":case"day":case"d":return r*d;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h;case"minutes":case"minute":case"mins":case"min":case"m":return r*m;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort(e){var t=Math.abs(e);return t>=d?Math.round(e/d)+"d":t>=h?Math.round(e/h)+"h":t>=m?Math.round(e/m)+"m":t>=s?Math.round(e/s)+"s":e+"ms"}function fmtLong(e){var t=Math.abs(e);return t>=d?plural(e,t,d,"day"):t>=h?plural(e,t,h,"hour"):t>=m?plural(e,t,m,"minute"):t>=s?plural(e,t,s,"second"):e+" ms"}function plural(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}function setup(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){var i;function s(){if(s.enabled){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=s,a=Number(new Date),c=a-(i||a);o.diff=c,o.prev=i,o.curr=a,i=a,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(function(e,n){if("%%"===e)return e;u++;var i=r.formatters[n];if("function"==typeof i){var s=t[u];e=i.call(o,s),t.splice(u,1),u--}return e})),r.formatArgs.call(o,t),(o.log||r.log).apply(o,t)}}return s.namespace=e,s.enabled=r.enabled(e),s.useColors=r.useColors(),s.color=t(e),s.destroy=n,s.extend=o,"function"==typeof r.init&&r.init(s),r.instances.push(s),s}function n(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function o(e,t){return r(this.namespace+(void 0===t?":":t)+e)}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){r.enable("")},r.enable=function(e){var t;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(t=0;t<o;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var i=r.instances[t];i.enabled=r.enabled(i.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms,Object.keys(e).forEach((function(t){r[t]=e[t]})),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common=setup,browser=createCommonjsModule((function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":r(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(o=n))})),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}})),browser_1=browser.log,browser_2=browser.formatArgs,browser_3=browser.save,browser_4=browser.load,browser_5=browser.useColors,browser_6=browser.storage,browser_7=browser.colors,hasFlag=(e,t)=>{t=t||process.argv;const r=e.startsWith("-")?"":1===e.length?"-":"--",n=t.indexOf(r+e),o=t.indexOf("--");return-1!==n&&(-1===o||n<o)};const env=process.env;let forceColor;function translateLevel(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function supportsColor(e){if(!1===forceColor)return 0;if(hasFlag("color=16m")||hasFlag("color=full")||hasFlag("color=truecolor"))return 3;if(hasFlag("color=256"))return 2;if(e&&!e.isTTY&&!0!==forceColor)return 0;const t=forceColor?1:0;if("win32"===process.platform){const e=os.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in env)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in env)||"codeship"===env.CI_NAME?1:t;if("TEAMCITY_VERSION"in env)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(env.TEAMCITY_VERSION)?1:0;if("truecolor"===env.COLORTERM)return 3;if("TERM_PROGRAM"in env){const e=parseInt((env.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(env.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(env.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)?1:"COLORTERM"in env?1:(env.TERM,t)}function getSupportLevel(e){return translateLevel(supportsColor(e))}hasFlag("no-color")||hasFlag("no-colors")||hasFlag("color=false")?forceColor=!1:(hasFlag("color")||hasFlag("colors")||hasFlag("color=true")||hasFlag("color=always"))&&(forceColor=!0),"FORCE_COLOR"in env&&(forceColor=0===env.FORCE_COLOR.length||0!==parseInt(env.FORCE_COLOR,10));var supportsColor_1={supportsColor:getSupportLevel,stdout:getSupportLevel(process.stdout),stderr:getSupportLevel(process.stderr)},node=createCommonjsModule((function(e,t){t.init=function(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(){return process.stderr.write(util.format.apply(util,arguments)+"\n")},t.formatArgs=function(r){var n=this.namespace;if(this.useColors){var o=this.color,i="[3"+(o<8?o:"8;5;"+o),s="  ".concat(i,";1m").concat(n," [0m");r[0]=s+r[0].split("\n").join("\n"+s),r.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{var r=supportsColor_1;r&&(r.stderr||r).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((function(e){return/^debug_/i.test(e)})).reduce((function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()})),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e}),{}),e.exports=common(t);var n=e.exports.formatters;n.o=function(e){return this.inspectOpts.colors=this.useColors,util.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},n.O=function(e){return this.inspectOpts.colors=this.useColors,util.inspect(e,this.inspectOpts)}})),node_1=node.init,node_2=node.log,node_3=node.formatArgs,node_4=node.save,node_5=node.load,node_6=node.useColors,node_7=node.colors,node_8=node.inspectOpts,src=createCommonjsModule((function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser:e.exports=node})),URL=url.URL,Writable=stream.Writable,debug=src("follow-redirects"),SAFE_METHODS={GET:!0,HEAD:!0,OPTIONS:!0,TRACE:!0},eventHandlers=Object.create(null);function RedirectableRequest(e,t){Writable.call(this),e.headers=e.headers||{},this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e.host&&(e.hostname||(e.hostname=e.host),delete e.host),t&&this.on("response",t);var r=this;if(this._onNativeResponse=function(e){r._processResponse(e)},!e.pathname&&e.path){var n=e.path.indexOf("?");n<0?e.pathname=e.path:(e.pathname=e.path.substring(0,n),e.search=e.path.substring(n))}this._performRequest()}function startTimer(e,t){clearTimeout(e._timeout),e._timeout=setTimeout((function(){e.emit("timeout")}),t)}function clearTimer(){clearTimeout(this._timeout)}function wrap(e){var t={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(e).forEach((function(n){var o=n+":",i=r[o]=e[n],s=t[n]=Object.create(i);s.request=function(e,n,i){if("string"==typeof e){var s=e;try{e=urlToOptions(new URL(s))}catch(t){e=url.parse(s)}}else URL&&e instanceof URL?e=urlToOptions(e):(i=n,n=e,e={protocol:o});return"function"==typeof n&&(i=n,n=null),(n=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},e,n)).nativeProtocols=r,assert.equal(n.protocol,o,"protocol mismatch"),debug("options",n),new RedirectableRequest(n,i)},s.get=function(e,t,r){var n=s.request(e,t,r);return n.end(),n}})),t}function noop(){}function urlToOptions(e){var t={protocol:e.protocol,hostname:e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:e.pathname+e.search,href:e.href};return""!==e.port&&(t.port=Number(e.port)),t}["abort","aborted","error","socket","timeout"].forEach((function(e){eventHandlers[e]=function(t){this._redirectable.emit(e,t)}})),RedirectableRequest.prototype=Object.create(Writable.prototype),RedirectableRequest.prototype.write=function(e,t,r){if(this._ending)throw new Error("write after end");if(!("string"==typeof e||"object"==typeof e&&"length"in e))throw new Error("data should be a string, Buffer or Uint8Array");"function"==typeof t&&(r=t,t=null),0!==e.length?this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,r)):(this.emit("error",new Error("Request body larger than maxBodyLength limit")),this.abort()):r&&r()},RedirectableRequest.prototype.end=function(e,t,r){if("function"==typeof e?(r=e,e=t=null):"function"==typeof t&&(r=t,t=null),e){var n=this,o=this._currentRequest;this.write(e,t,(function(){n._ended=!0,o.end(null,null,r)})),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,r)},RedirectableRequest.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},RedirectableRequest.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},RedirectableRequest.prototype.setTimeout=function(e,t){if(t&&this.once("timeout",t),this.socket)startTimer(this,e);else{var r=this;this._currentRequest.once("socket",(function(){startTimer(r,e)}))}return this.once("response",clearTimer),this.once("error",clearTimer),this},["abort","flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach((function(e){RedirectableRequest.prototype[e]=function(t,r){return this._currentRequest[e](t,r)}})),["aborted","connection","socket"].forEach((function(e){Object.defineProperty(RedirectableRequest.prototype,e,{get:function(){return this._currentRequest[e]}})})),RedirectableRequest.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(t){if(this._options.agents){var r=e.substr(0,e.length-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=t.request(this._options,this._onNativeResponse);for(var o in this._currentUrl=url.format(this._options),n._redirectable=this,eventHandlers)o&&n.on(o,eventHandlers[o]);if(this._isRedirect){var i=0,s=this,a=this._requestBodyBuffers;!function e(t){if(n===s._currentRequest)if(t)s.emit("error",t);else if(i<a.length){var r=a[i++];n.finished||n.write(r.data,r.encoding,e)}else s._ended&&n.end()}()}}else this.emit("error",new Error("Unsupported protocol "+e))},RedirectableRequest.prototype._processResponse=function(e){this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:e.statusCode});var t=e.headers.location;if(t&&!1!==this._options.followRedirects&&e.statusCode>=300&&e.statusCode<400){if(this._currentRequest.removeAllListeners(),this._currentRequest.on("error",noop),this._currentRequest.abort(),++this._redirectCount>this._options.maxRedirects)return void this.emit("error",new Error("Max redirects exceeded."));var r,n=this._options.headers;if(307!==e.statusCode&&!(this._options.method in SAFE_METHODS))for(r in this._options.method="GET",this._requestBodyBuffers=[],n)/^content-/i.test(r)&&delete n[r];if(!this._isRedirect)for(r in n)/^host$/i.test(r)&&delete n[r];var o=url.resolve(this._currentUrl,t);debug("redirecting to",o),Object.assign(this._options,url.parse(o)),this._isRedirect=!0,this._performRequest(),e.destroy()}else e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),this._requestBodyBuffers=[]};var followRedirects=wrap({http:http,https:https}),wrap_1=wrap;followRedirects.wrap=wrap_1;var _args=[["axios@0.18.0","/Users/yanqiong/Documents/shinny/tqsdk-js"]],_from="axios@0.18.0",_id="axios@0.18.0",_inBundle=!1,_integrity="sha1-MtU+SFHv3AoRmTts0AB4nXDAUQI=",_location="/axios",_phantomChildren={},_requested={type:"version",registry:!0,raw:"axios@0.18.0",name:"axios",escapedName:"axios",rawSpec:"0.18.0",saveSpec:null,fetchSpec:"0.18.0"},_requiredBy=["/"],_resolved="https://registry.npmjs.org/axios/-/axios-0.18.0.tgz",_spec="0.18.0",_where="/Users/yanqiong/Documents/shinny/tqsdk-js",author={name:"Matt Zabriskie"},browser$1={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},bugs={url:"https://github.com/axios/axios/issues"},bundlesize=[{path:"./dist/axios.min.js",threshold:"5kB"}],dependencies={"follow-redirects":"^1.3.0","is-buffer":"^1.1.5"},description="Promise based HTTP client for the browser and node.js",devDependencies={bundlesize:"^0.5.7",coveralls:"^2.11.9","es6-promise":"^4.0.5",grunt:"^1.0.1","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.0.0","grunt-contrib-nodeunit":"^1.0.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^19.0.0","grunt-karma":"^2.0.0","grunt-ts":"^6.0.0-beta.3","grunt-webpack":"^1.0.18","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^1.3.0","karma-chrome-launcher":"^2.0.0","karma-coverage":"^1.0.0","karma-firefox-launcher":"^1.0.0","karma-jasmine":"^1.0.2","karma-jasmine-ajax":"^0.1.13","karma-opera-launcher":"^1.0.0","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^1.1.0","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.7.0","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",sinon:"^1.17.4",typescript:"^2.0.3","url-search-params":"^0.6.1",webpack:"^1.13.1","webpack-dev-server":"^1.14.1"},homepage="https://github.com/axios/axios",keywords=["xhr","http","ajax","promise","node"],license="MIT",main="index.js",name="axios",repository={type:"git",url:"git+https://github.com/axios/axios.git"},scripts={build:"NODE_ENV=production grunt build",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",examples:"node ./examples/server.js",postversion:"git push && git push --tags",preversion:"npm test",start:"node ./sandbox/server.js",test:"grunt test && bundlesize",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},typings="./index.d.ts",version$1="0.18.0",_package={_args:_args,_from:_from,_id:_id,_inBundle:_inBundle,_integrity:_integrity,_location:_location,_phantomChildren:_phantomChildren,_requested:_requested,_requiredBy:_requiredBy,_resolved:_resolved,_spec:_spec,_where:_where,author:author,browser:browser$1,bugs:bugs,bundlesize:bundlesize,dependencies:dependencies,description:description,devDependencies:devDependencies,homepage:homepage,keywords:keywords,license:license,main:main,name:name,repository:repository,scripts:scripts,typings:typings,version:version$1},_package$1=Object.freeze({__proto__:null,_args:_args,_from:_from,_id:_id,_inBundle:_inBundle,_integrity:_integrity,_location:_location,_phantomChildren:_phantomChildren,_requested:_requested,_requiredBy:_requiredBy,_resolved:_resolved,_spec:_spec,_where:_where,author:author,browser:browser$1,bugs:bugs,bundlesize:bundlesize,dependencies:dependencies,description:description,devDependencies:devDependencies,homepage:homepage,keywords:keywords,license:license,main:main,name:name,repository:repository,scripts:scripts,typings:typings,version:version$1,default:_package}),pkg=getCjsExportFromNamespace(_package$1),httpFollow=followRedirects.http,httpsFollow=followRedirects.https,http_1=function(e){return new Promise((function(t,r){var n,o=e.data,i=e.headers;if(i["User-Agent"]||i["user-agent"]||(i["User-Agent"]="axios/"+pkg.version),o&&!utils.isStream(o)){if(Buffer.isBuffer(o));else if(utils.isArrayBuffer(o))o=new Buffer(new Uint8Array(o));else{if(!utils.isString(o))return r(createError("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));o=new Buffer(o,"utf-8")}i["Content-Length"]=o.length}var s=void 0;e.auth&&(s=(e.auth.username||"")+":"+(e.auth.password||""));var a=url.parse(e.url),c=a.protocol||"http:";if(!s&&a.auth){var u=a.auth.split(":");s=(u[0]||"")+":"+(u[1]||"")}s&&delete i.Authorization;var l="https:"===c,f=l?e.httpsAgent:e.httpAgent,d={path:buildURL(a.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method,headers:i,agent:f,auth:s};e.socketPath?d.socketPath=e.socketPath:(d.hostname=a.hostname,d.port=a.port);var h,p=e.proxy;if(!p&&!1!==p){var m=c.slice(0,-1)+"_proxy",v=process.env[m]||process.env[m.toUpperCase()];if(v){var y=url.parse(v);if(p={host:y.hostname,port:y.port},y.auth){var _=y.auth.split(":");p.auth={username:_[0],password:_[1]}}}}if(p&&(d.hostname=p.host,d.host=p.host,d.headers.host=a.hostname+(a.port?":"+a.port:""),d.port=p.port,d.path=c+"//"+a.hostname+(a.port?":"+a.port:"")+d.path,p.auth)){var g=new Buffer(p.auth.username+":"+p.auth.password,"utf8").toString("base64");d.headers["Proxy-Authorization"]="Basic "+g}e.transport?h=e.transport:0===e.maxRedirects?h=l?https:http:(e.maxRedirects&&(d.maxRedirects=e.maxRedirects),h=l?httpsFollow:httpFollow),e.maxContentLength&&e.maxContentLength>-1&&(d.maxBodyLength=e.maxContentLength);var b=h.request(d,(function(o){if(!b.aborted){clearTimeout(n),n=null;var i=o;switch(o.headers["content-encoding"]){case"gzip":case"compress":case"deflate":i=i.pipe(zlib.createUnzip()),delete o.headers["content-encoding"]}var s=o.req||b,a={status:o.statusCode,statusText:o.statusMessage,headers:o.headers,config:e,request:s};if("stream"===e.responseType)a.data=i,settle(t,r,a);else{var c=[];i.on("data",(function(t){c.push(t),e.maxContentLength>-1&&Buffer.concat(c).length>e.maxContentLength&&r(createError("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,s))})),i.on("error",(function(t){b.aborted||r(enhanceError(t,e,null,s))})),i.on("end",(function(){var n=Buffer.concat(c);"arraybuffer"!==e.responseType&&(n=n.toString("utf8")),a.data=n,settle(t,r,a)}))}}}));b.on("error",(function(t){b.aborted||r(enhanceError(t,e,null,b))})),e.timeout&&!n&&(n=setTimeout((function(){b.abort(),r(createError("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",b))}),e.timeout)),e.cancelToken&&e.cancelToken.promise.then((function(e){b.aborted||(b.abort(),r(e))})),utils.isStream(o)?o.pipe(b):b.end(o)}))},DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(e,t){!utils.isUndefined(e)&&utils.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function getDefaultAdapter(){var e;return"undefined"!=typeof XMLHttpRequest?e=xhr:"undefined"!=typeof process&&(e=http_1),e}var defaults={adapter:getDefaultAdapter(),transformRequest:[function(e,t){return normalizeHeaderName(t,"Content-Type"),utils.isFormData(e)||utils.isArrayBuffer(e)||utils.isBuffer(e)||utils.isStream(e)||utils.isFile(e)||utils.isBlob(e)?e:utils.isArrayBufferView(e)?e.buffer:utils.isURLSearchParams(e)?(setContentTypeIfUnset(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):utils.isObject(e)?(setContentTypeIfUnset(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],(function(e){defaults.headers[e]={}})),utils.forEach(["post","put","patch"],(function(e){defaults.headers[e]=utils.merge(DEFAULT_CONTENT_TYPE)}));var defaults_1=defaults;function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},InterceptorManager.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},InterceptorManager.prototype.forEach=function(e){utils.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var InterceptorManager_1=InterceptorManager,transformData=function(e,t,r){return utils.forEach(r,(function(r){e=r(e,t)})),e},isCancel=function(e){return!(!e||!e.__CANCEL__)},isAbsoluteURL=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},combineURLs=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e};function throwIfCancellationRequested(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var dispatchRequest=function(e){return throwIfCancellationRequested(e),e.baseURL&&!isAbsoluteURL(e.url)&&(e.url=combineURLs(e.baseURL,e.url)),e.headers=e.headers||{},e.data=transformData(e.data,e.headers,e.transformRequest),e.headers=utils.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),utils.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||defaults_1.adapter)(e).then((function(t){return throwIfCancellationRequested(e),t.data=transformData(t.data,t.headers,e.transformResponse),t}),(function(t){return isCancel(t)||(throwIfCancellationRequested(e),t&&t.response&&(t.response.data=transformData(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))};function Axios(e){this.defaults=e,this.interceptors={request:new InterceptorManager_1,response:new InterceptorManager_1}}Axios.prototype.request=function(e){"string"==typeof e&&(e=utils.merge({url:arguments[0]},arguments[1])),(e=utils.merge(defaults_1,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[dispatchRequest,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},utils.forEach(["delete","get","head","options"],(function(e){Axios.prototype[e]=function(t,r){return this.request(utils.merge(r||{},{method:e,url:t}))}})),utils.forEach(["post","put","patch"],(function(e){Axios.prototype[e]=function(t,r,n){return this.request(utils.merge(n||{},{method:e,url:t,data:r}))}}));var Axios_1=Axios;function Cancel(e){this.message=e}Cancel.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0;var Cancel_1=Cancel;function CancelToken(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new Cancel_1(e),t(r.reason))}))}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},CancelToken.source=function(){var e;return{token:new CancelToken((function(t){e=t})),cancel:e}};var CancelToken_1=CancelToken,spread=function(e){return function(t){return e.apply(null,t)}};function createInstance(e){var t=new Axios_1(e),r=bind(Axios_1.prototype.request,t);return utils.extend(r,Axios_1.prototype,t),utils.extend(r,t),r}var axios=createInstance(defaults_1);axios.Axios=Axios_1,axios.create=function(e){return createInstance(utils.merge(defaults_1,e))},axios.Cancel=Cancel_1,axios.CancelToken=CancelToken_1,axios.isCancel=isCancel,axios.all=function(e){return Promise.all(e)},axios.spread=spread;var axios_1=axios,default_1=axios;axios_1.default=default_1;var axios$1=axios_1;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=_superPropBase(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}var check=function(e){return e&&e.Math==Math&&e},global_1=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof commonjsGlobal&&commonjsGlobal)||Function("return this")(),fails=function(e){try{return!!e()}catch(e){return!0}},descriptors=!fails((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),nativePropertyIsEnumerable={}.propertyIsEnumerable,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor&&!nativePropertyIsEnumerable.call({1:2},1),f=NASHORN_BUG?function(e){var t=getOwnPropertyDescriptor(this,e);return!!t&&t.enumerable}:nativePropertyIsEnumerable,objectPropertyIsEnumerable={f:f},createPropertyDescriptor=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},toString$1={}.toString,classofRaw=function(e){return toString$1.call(e).slice(8,-1)},split="".split,indexedObject=fails((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==classofRaw(e)?split.call(e,""):Object(e)}:Object,requireObjectCoercible=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},toIndexedObject=function(e){return indexedObject(requireObjectCoercible(e))},isObject$1=function(e){return"object"==typeof e?null!==e:"function"==typeof e},toPrimitive=function(e,t){if(!isObject$1(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!isObject$1(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!isObject$1(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!isObject$1(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},hasOwnProperty={}.hasOwnProperty,has=function(e,t){return hasOwnProperty.call(e,t)},document$1=global_1.document,EXISTS=isObject$1(document$1)&&isObject$1(document$1.createElement),documentCreateElement=function(e){return EXISTS?document$1.createElement(e):{}},ie8DomDefine=!descriptors&&!fails((function(){return 7!=Object.defineProperty(documentCreateElement("div"),"a",{get:function(){return 7}}).a})),nativeGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,f$1=descriptors?nativeGetOwnPropertyDescriptor:function(e,t){if(e=toIndexedObject(e),t=toPrimitive(t,!0),ie8DomDefine)try{return nativeGetOwnPropertyDescriptor(e,t)}catch(e){}if(has(e,t))return createPropertyDescriptor(!objectPropertyIsEnumerable.f.call(e,t),e[t])},objectGetOwnPropertyDescriptor={f:f$1},anObject=function(e){if(!isObject$1(e))throw TypeError(String(e)+" is not an object");return e},nativeDefineProperty=Object.defineProperty,f$2=descriptors?nativeDefineProperty:function(e,t,r){if(anObject(e),t=toPrimitive(t,!0),anObject(r),ie8DomDefine)try{return nativeDefineProperty(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e},objectDefineProperty={f:f$2},createNonEnumerableProperty=descriptors?function(e,t,r){return objectDefineProperty.f(e,t,createPropertyDescriptor(1,r))}:function(e,t,r){return e[t]=r,e},setGlobal=function(e,t){try{createNonEnumerableProperty(global_1,e,t)}catch(r){global_1[e]=t}return t},SHARED="__core-js_shared__",store=global_1[SHARED]||setGlobal(SHARED,{}),sharedStore=store,shared=createCommonjsModule((function(e){(e.exports=function(e,t){return sharedStore[e]||(sharedStore[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.4.4",mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),functionToString=shared("native-function-to-string",Function.toString),WeakMap=global_1.WeakMap,nativeWeakMap="function"==typeof WeakMap&&/native code/.test(functionToString.call(WeakMap)),id=0,postfix=Math.random(),uid=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++id+postfix).toString(36)},keys=shared("keys"),sharedKey=function(e){return keys[e]||(keys[e]=uid(e))},hiddenKeys={},WeakMap$1=global_1.WeakMap,set,get,has$1,enforce=function(e){return has$1(e)?get(e):set(e,{})},getterFor=function(e){return function(t){var r;if(!isObject$1(t)||(r=get(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}};if(nativeWeakMap){var store$1=new WeakMap$1,wmget=store$1.get,wmhas=store$1.has,wmset=store$1.set;set=function(e,t){return wmset.call(store$1,e,t),t},get=function(e){return wmget.call(store$1,e)||{}},has$1=function(e){return wmhas.call(store$1,e)}}else{var STATE=sharedKey("state");hiddenKeys[STATE]=!0,set=function(e,t){return createNonEnumerableProperty(e,STATE,t),t},get=function(e){return has(e,STATE)?e[STATE]:{}},has$1=function(e){return has(e,STATE)}}var internalState={set:set,get:get,has:has$1,enforce:enforce,getterFor:getterFor},redefine=createCommonjsModule((function(e){var t=internalState.get,r=internalState.enforce,n=String(functionToString).split("toString");shared("inspectSource",(function(e){return functionToString.call(e)})),(e.exports=function(e,t,o,i){var s=!!i&&!!i.unsafe,a=!!i&&!!i.enumerable,c=!!i&&!!i.noTargetGet;"function"==typeof o&&("string"!=typeof t||has(o,"name")||createNonEnumerableProperty(o,"name",t),r(o).source=n.join("string"==typeof t?t:"")),e!==global_1?(s?!c&&e[t]&&(a=!0):delete e[t],a?e[t]=o:createNonEnumerableProperty(e,t,o)):a?e[t]=o:setGlobal(t,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||functionToString.call(this)}))})),path=global_1,aFunction=function(e){return"function"==typeof e?e:void 0},getBuiltIn=function(e,t){return arguments.length<2?aFunction(path[e])||aFunction(global_1[e]):path[e]&&path[e][t]||global_1[e]&&global_1[e][t]},ceil=Math.ceil,floor=Math.floor,toInteger=function(e){return isNaN(e=+e)?0:(e>0?floor:ceil)(e)},min=Math.min,toLength=function(e){return e>0?min(toInteger(e),9007199254740991):0},max=Math.max,min$1=Math.min,toAbsoluteIndex=function(e,t){var r=toInteger(e);return r<0?max(r+t,0):min$1(r,t)},createMethod=function(e){return function(t,r,n){var o,i=toIndexedObject(t),s=toLength(i.length),a=toAbsoluteIndex(n,s);if(e&&r!=r){for(;s>a;)if((o=i[a++])!=o)return!0}else for(;s>a;a++)if((e||a in i)&&i[a]===r)return e||a||0;return!e&&-1}},arrayIncludes={includes:createMethod(!0),indexOf:createMethod(!1)},indexOf=arrayIncludes.indexOf,objectKeysInternal=function(e,t){var r,n=toIndexedObject(e),o=0,i=[];for(r in n)!has(hiddenKeys,r)&&has(n,r)&&i.push(r);for(;t.length>o;)has(n,r=t[o++])&&(~indexOf(i,r)||i.push(r));return i},enumBugKeys=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],hiddenKeys$1=enumBugKeys.concat("length","prototype"),f$3=Object.getOwnPropertyNames||function(e){return objectKeysInternal(e,hiddenKeys$1)},objectGetOwnPropertyNames={f:f$3},f$4=Object.getOwnPropertySymbols,objectGetOwnPropertySymbols={f:f$4},ownKeys=getBuiltIn("Reflect","ownKeys")||function(e){var t=objectGetOwnPropertyNames.f(anObject(e)),r=objectGetOwnPropertySymbols.f;return r?t.concat(r(e)):t},copyConstructorProperties=function(e,t){for(var r=ownKeys(t),n=objectDefineProperty.f,o=objectGetOwnPropertyDescriptor.f,i=0;i<r.length;i++){var s=r[i];has(e,s)||n(e,s,o(t,s))}},replacement=/#|\.prototype\./,isForced=function(e,t){var r=data[normalize(e)];return r==POLYFILL||r!=NATIVE&&("function"==typeof t?fails(t):!!t)},normalize=isForced.normalize=function(e){return String(e).replace(replacement,".").toLowerCase()},data=isForced.data={},NATIVE=isForced.NATIVE="N",POLYFILL=isForced.POLYFILL="P",isForced_1=isForced,getOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f,_export=function(e,t){var r,n,o,i,s,a=e.target,c=e.global,u=e.stat;if(r=c?global_1:u?global_1[a]||setGlobal(a,{}):(global_1[a]||{}).prototype)for(n in t){if(i=t[n],o=e.noTargetGet?(s=getOwnPropertyDescriptor$1(r,n))&&s.value:r[n],!isForced_1(c?n:a+(u?".":"#")+n,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;copyConstructorProperties(i,o)}(e.sham||o&&o.sham)&&createNonEnumerableProperty(i,"sham",!0),redefine(r,n,i,e)}},aFunction$1=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},bindContext=function(e,t,r){if(aFunction$1(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}},html=getBuiltIn("document","documentElement"),userAgent=getBuiltIn("navigator","userAgent")||"",isIos=/(iphone|ipod|ipad).*applewebkit/i.test(userAgent),location=global_1.location,set$1=global_1.setImmediate,clear=global_1.clearImmediate,process$1=global_1.process,MessageChannel=global_1.MessageChannel,Dispatch=global_1.Dispatch,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",defer,channel,port,run=function(e){if(queue.hasOwnProperty(e)){var t=queue[e];delete queue[e],t()}},runner=function(e){return function(){run(e)}},listener=function(e){run(e.data)},post=function(e){global_1.postMessage(e+"",location.protocol+"//"+location.host)};set$1&&clear||(set$1=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return queue[++counter]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},defer(counter),counter},clear=function(e){delete queue[e]},"process"==classofRaw(process$1)?defer=function(e){process$1.nextTick(runner(e))}:Dispatch&&Dispatch.now?defer=function(e){Dispatch.now(runner(e))}:MessageChannel&&!isIos?(channel=new MessageChannel,port=channel.port2,channel.port1.onmessage=listener,defer=bindContext(port.postMessage,port,1)):!global_1.addEventListener||"function"!=typeof postMessage||global_1.importScripts||fails(post)?defer=ONREADYSTATECHANGE in documentCreateElement("script")?function(e){html.appendChild(documentCreateElement("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run(e)}}:function(e){setTimeout(runner(e),0)}:(defer=post,global_1.addEventListener("message",listener,!1)));var task={set:set$1,clear:clear},FORCED=!global_1.setImmediate||!global_1.clearImmediate;_export({global:!0,bind:!0,enumerable:!0,forced:FORCED},{setImmediate:task.set,clearImmediate:task.clear});var setImmediate$1=path.setImmediate,eventemitter3=createCommonjsModule((function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,n,i,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new o(n,i||e,s),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,o=[];if(0===this._eventsCount)return o;for(n in e=this._events)t.call(e,n)&&o.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,s=new Array(i);o<i;o++)s[o]=n[o].fn;return s},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,o,i,s){var a=r?r+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,o),!0;case 5:return l.fn.call(l.context,t,n,o,i),!0;case 6:return l.fn.call(l.context,t,n,o,i,s),!0}for(u=1,c=new Array(f-1);u<f;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var d,h=l.length;for(u=0;u<h;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),f){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;case 4:l[u].fn.call(l[u].context,t,n,o);break;default:if(!c)for(d=1,c=new Array(f-1);d<f;d++)c[d-1]=arguments[d];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,o){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||o&&!a.once||n&&a.context!==n||s(this,i);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==t||o&&!a[c].once||n&&a[c].context!==n)&&u.push(a[c]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a})),IsEmptyObject=function(e){return e&&e.constructor===Object&&0===Object.keys(e).length},RandomStr=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),r="",n=0;n<e;n++)r+=t[62*Math.random()|0];return r};function _genList(e){for(var t=[],r=e.split("|"),n=0;n<r.length;n++)t.push(r[n].trim());return t}function _genItem(e,t){for(var r={},n=0;n<e.length;n++)r[e[n]]=t[n];return r}function _genTableRow(e,t,r,n){var o={state:e,state_detail:t,isRow:!1,row:null};switch(t){case"T":""===n.replace(/-/g,"")?o.state_detail="C":r[e]=_genList(n);break;case"C":""===n.replace(/-/g,"")?o.state_detail="S":(o.isRow=!0,o.row=_genItem(r[e],_genList(n)));break;case"S":""===n.replace(/-/g,"")&&(o.state="",o.state_detail="")}return o}var ParseSettlementContent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""===e)return e;var t=e.split("\n"),r="",n="",o={},i={positionClosed:"平仓明细 Position Closed",transactionRecords:"成交记录 Transaction Record",positions:"持仓汇总 Positions",positionsDetail:"持仓明细 Positions Detail",delivery:"交割明细  Delivery"},s=[],a=[],c={account:{}};Object.entries(i).forEach((function(e){s.push(e[0]),a.push(e[1]),c[e[0]]=[]}));for(var u=0;u<t.length;u++){var l=t[u].trim();if("资金状况  币种：人民币  Account Summary  Currency：CNY"!==l){if(a.includes(l))r=s[a.indexOf(l)],n="T",u++;else if("A-S"===r){if(0===l.length||""===l.replace("-","")){r="";continue}l.match(/([\u4e00-\u9fa5][\u4e00-\u9fa5\s]+[\u4e00-\u9fa5])+/g);for(var f=l.match(/([A-Z][a-zA-Z\.\/\(\)\s]+)[:：]+/g),d=l.match(/(-?[\d]+\.\d\d)/g),h=0;h<f.length;h++)c.account[f[h].split(/[:：]/)[0]]=d[h]}else if(s.includes(r)){if(0===l.length){r="";continue}var p=_genTableRow(r,n,o,l);r=p.state,n=p.state_detail,p.isRow&&c[r].push(p.row)}}else r="A-S",u++}return c},TqWebsocket=function(_EventEmitter){function TqWebsocket(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck(this,TqWebsocket),(t=_possibleConstructorReturn(this,_getPrototypeOf(TqWebsocket).call(this))).urlList=e instanceof Array?e:[e],t.ws=null,t.queue=[],t.reconnect=!0,t.reconnectTask=null,t.reconnectInterval=r.reconnectInterval?r.reconnectInterval:3e3,t.reconnectMaxTimes=r.reconnectMaxTimes?r.reconnectMaxTimes:2,t.reconnectTimes=0,t.reconnectUrlIndex=0,t.STATUS={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},t.__init(),t}return _inherits(TqWebsocket,_EventEmitter),_createClass(TqWebsocket,[{key:"send",value:function(e){var t=JSON.stringify(e);this.isReady()?this.ws.send(t):this.queue.push(t)}},{key:"isReady",value:function(){return this.ws.readyState===WebSocket.OPEN}},{key:"__init",value:function __init(){this.ws=new WebSocket(this.urlList[this.reconnectUrlIndex]),this.reconnectUrlIndex===this.urlList.length-1&&(this.reconnectTimes+=1);var _this=this;this.ws.onmessage=function(message){var data=eval("("+message.data+")");_this.emit("message",data),setImmediate((function(){_this.ws.send('{"aid":"peek_message"}')}))},this.ws.onclose=function(e){console.log("close",e),_this.emit("close"),_this.queue=[],_this.reconnect&&(_this.reconnectMaxTimes<=_this.reconnectTimes?(clearTimeout(_this.reconnectTask),_this.emit("death",{msg:"超过重连次数"+_this.reconnectMaxTimes})):_this.reconnectTask=setTimeout((function(){3===_this.ws.readyState&&(_this.reconnectUrlIndex=_this.reconnectUrlIndex+1<_this.urlList.length?_this.reconnectUrlIndex+1:0,_this.__init(),_this.emit("reconnect",{msg:"发起重连第 "+_this.reconnectTimes+" 次"}))}),_this.reconnectInterval))},this.ws.onerror=function(e){_this.emit("error",e),_this.ws.close()},this.ws.onopen=function(){for(_this.emit("open",{msg:"发起重连第 "+_this.reconnectTimes+" 次, 成功"}),_this.reconnectTimes=0,_this.reconnectUrlIndex=0,this.reconnectTask&&clearTimeout(_this.reconnectTask);_this.queue.length>0&&1===_this.ws.readyState;)_this.ws.send(_this.queue.shift())}}},{key:"close",value:function(){this.ws.onclose=function(){},this.ws.close()}}]),TqWebsocket}(eventemitter3),TqTradeWebsocket=function(e){function t(e,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,o))).dm=r,n.req_login=null,n.init(),n}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this.on("message",(function(t){if("rtn_data"===t.aid){for(var r=e._separateNotifies(t.data),n=0;n<r.length;n++)e.emit("notify",r[n]);e.dm.mergeData(t.data)}else if("rtn_brokers"===t.aid)e.emit("rtn_brokers",t.brokers);else if("qry_settlement_info"===t.aid){var o=ParseSettlementContent(t.settlement_info);e.dm.mergeData({trade:_defineProperty({},t.user_name,{his_settlements:_defineProperty({},t.trading_day,o)})}),TQSDK.store&&TQSDK.store.setContent(t.user_name,t.trading_day,t.settlement_info)}})),this.on("reconnect",(function(){e.req_login&&e.send(e.req_login)}))}},{key:"_separateNotifies",value:function(e){for(var t=[],r=0;r<e.length;r++)if(e[r].notify){var n=e.splice(r--,1)[0].notify;for(var o in n)t.push(n[o])}return t}},{key:"send",value:function(e){"req_login"===e.aid&&(this.req_login=e),_get(_getPrototypeOf(t.prototype),"send",this).call(this,e)}}]),t}(TqWebsocket),TqQuoteWebsocket=function(e){function t(e,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,o))).dm=r,n.subscribe_quote=null,n.charts={},n.init(),n}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this.on("message",(function(t){"rtn_data"===t.aid&&e.dm.mergeData(t.data)})),this.on("reconnect",(function(t){for(var r in console.log(t),e.subscribe_quote&&e.send(e.subscribe_quote),e.charts)e.charts[r].view_width>0&&e.send(e.charts[r])}))}},{key:"send",value:function(e){"subscribe_quote"===e.aid?null!==this.subscribe_quote&&JSON.stringify(e.ins_list)===JSON.stringify(this.subscribe_quote.ins_list)||(this.subscribe_quote=e,_get(_getPrototypeOf(t.prototype),"send",this).call(this,e)):"set_chart"===e.aid&&(0===e.view_width?this.charts[e.chart_id]&&delete this.charts[e.chart_id]:this.charts[e.chart_id]=e,_get(_getPrototypeOf(t.prototype),"send",this).call(this,e))}}]),t}(TqWebsocket),TqRecvOnlyWebsocket=function(e){function t(e,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,o))).dm=r,n.init(),n}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this.on("message",(function(t){"rtn_data"===t.aid&&e.dm.mergeData(t.data)})),this.on("reconnect",(function(e){console.log(e)}))}}]),t}(TqWebsocket),QUOTE=function(){function e(){_classCallCheck(this,e),this.instrument_id="",this.datetime="",this._last_price="-",this.ask_price1="-",this.ask_volume1="-",this.bid_price1="-",this.bid_volume1="-",this.highest="-",this.lowest="-",this.open="-",this.close="-",this.average="-",this.volume="-",this.amount="-",this.open_interest="-",this.lower_limit="-",this.upper_limit="-",this.settlement="-",this.change="-",this.change_percent="-",this.strike_price=NaN,this.pre_open_interest="-",this.pre_close="-",this.pre_volume="-",this._pre_settlement="-",this.margin="-",this.commission="-"}return _createClass(e,[{key:"setChange",value:function(){Number.isFinite(this._last_price)&&Number.isFinite(this._pre_settlement)&&0!==this._pre_settlement&&(this.change=this._last_price-this._pre_settlement,this.change_percent=this.change/this._pre_settlement*100)}},{key:"last_price",set:function(e){this._last_price=e,this.setChange()},get:function(){return this._last_price}},{key:"pre_settlement",set:function(e){this._pre_settlement=e,this.setChange()},get:function(){return this._pre_settlement}}]),e}(),DataManager=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._epoch=0,e._data=r,e._diffs=[],e}return _inherits(t,e),_createClass(t,[{key:"mergeData",value:function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=Array.isArray(e)?e:[e];r&&(this._epoch+=1,this._diffs=o);var i=!0,s=!1,a=void 0;try{for(var c,u=o[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var l=c.value;null===l||IsEmptyObject(l)||t.MergeObject(this._data,l,this._epoch,n)}}catch(e){s=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(s)throw a}}r&&this._data._epoch===this._epoch&&this.emit("data",null)}},{key:"isChanging",value:function(e){if(Array.isArray(e)){for(var t=this._data,r=0;r<e.length;r++){if((t=t[e[r]])._epoch&&t._epoch===this._epoch)return!0;if(void 0===t)return!1}return!1}return!(!e||!e._epoch)&&e._epoch===this._epoch}},{key:"setDefault",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._data;return t.SetDefault(n,e,r)}},{key:"getByPath",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._data;return t.GetByPath(r,e)}}]),t}(eventemitter3);DataManager.SetDefault=function(e,t,r){for(var n=e,o=0;o<t.length;o++){if("string"!=typeof t[o]&&"number"!=typeof t[o]){console.error("SetDefault, pathArray 中的元素必須是 string or number, but pathArray = ",t);break}var i=t[o];if(i in n||(n[i]=o===t.length-1?r:{}),o===t.length-1)return n[i];n=n[i]}return n},DataManager.GetByPath=function(e,t){for(var r=e,n=0;n<t.length;n++)if(null==(r=r[t[n]]))return r;return r},DataManager.MergeObject=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];for(var o in t){var i=t[o],s=_typeof(i);if(["string","boolean","number"].includes(s))e[o]="NaN"===i?NaN:i;else if(null===i&&n)delete e[o];else if(Array.isArray(i))e[o]=i,i._epoch||Object.defineProperty(i,"_epoch",{configurable:!1,enumerable:!1,writable:!0}),i._epoch=r;else if("object"===s)if(e[o]=e[o]||("data"===o?[]:{}),"quotes"===o)for(var a in i){var c=i[a];null!==c?(e[o][a]||(e[o][a]=new QUOTE),DataManager.MergeObject(e[o][a],c,r,n)):n&&a&&delete e[o][a]}else DataManager.MergeObject(e[o],i,r,n)}e._epoch||Object.defineProperty(e,"_epoch",{configurable:!1,enumerable:!1,writable:!0}),e._epoch=r};var TQSDK=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.symbolsServerUrl,o=void 0===n?"https://openmd.shinnytech.com/t/md/symbols/latest.json":n,i=r.wsQuoteUrl,s=void 0===i?"wss://openmd.shinnytech.com/t/md/front/mobile":i,a=r.wsTradeUrl,c=void 0===a?"wss://opentd.shinnytech.com/trade/user0":a,u=r.clientSystemInfo,l=void 0===u?"":u,f=r.clientAppId,d=void 0===f?"":f,h=r.autoInit,p=void 0===h||h,m=r.data,v=void 0===m?{klines:{},quotes:{},charts:{},ticks:{},trade:{}}:m;_classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._insUrl=o,e._mdUrl=s,e._tdUrl=c,e.clientSystemInfo=l,e.clientAppIds=d,e._prefix="TQJS_";var y=_assertThisInitialized(e);return e.dm=new DataManager(v),e.dm.on("data",(function(){y.emit("rtn_data",null)})),e.brokers=null,e.trade_accounts={},e.isReady=!1,e.quotesWs=null,e.quotesInfo={},p&&e.init(),e}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this.initMdWebsocket(),this.initTdWebsocket()}},{key:"initMdWebsocket",value:function(){var e=this;axios$1.get(this._insUrl,{headers:{Accept:"application/json; charset=utf-8"}}).then((function(t){e.quotesInfo=t.data,e.isReady=!0,e.emit("ready"),e.emit("rtn_data",null)})).catch((function(t){return e.emit("error",t),console.error("Error: "+t.message),t})),this.quotesWs=new TqQuoteWebsocket(this._mdUrl,this.dm)}},{key:"initTdWebsocket",value:function(){var e=this;axios$1.get("https://files.shinnytech.com/broker-list.json",{headers:{Accept:"application/json; charset=utf-8"}}).then((function(t){e.brokers_list=t.data,e.brokers=Object.keys(t.data).filter((function(e){return!e.endsWith(" ")})).sort(),e.emit("rtn_brokers",e.brokers),console.log(e.brokers)})).catch((function(t){return e.emit("error",t),console.error("Error: "+t.message),t}))}},{key:"addWebSocket",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?new TqRecvOnlyWebsocket(e,this.dm):null}},{key:"addAccount",value:function(e,t,r){if(e&&t&&r){if(-1===this.brokers.indexOf(e))return void console.error("不支持该期货公司");if(!this.trade_accounts[t]){var n=new TqTradeWebsocket(this.brokers_list[e].url,this.dm),o=this;n.on("notify",(function(r){o.emit("notify",Object.assign(r,{bid:e,user_id:t}))})),this.trade_accounts[t]={bid:e,userId:t,password:r,ws:n}}return this.trade_accounts[t]}return null}},{key:"removeAccount",value:function(e,t){e&&t&&this.trade_accounts[t]&&(this.trade_accounts[t].ws.close(),delete this.trade_accounts[t],delete this.dm._data.trade[t])}},{key:"refreshAccount",value:function(e,t){e&&t&&this.trade_accounts[t]&&(this.trade_accounts[t].ws.send({aid:"qry_account_info"}),this.trade_accounts[t].ws.send({aid:"qry_account_register"}))}},{key:"refreshAccounts",value:function(){for(var e in this.trade_accounts)this.trade_accounts[e].ws.send({aid:"qry_account_info"}),this.trade_accounts[e].ws.send({aid:"qry_account_register"})}},{key:"updateData",value:function(e){this.dm.mergeData(e,!0,!1)}},{key:"getByPath",value:function(e){return this.dm.getByPath(e)}},{key:"getQuotesByInput",value:function(e){if("string"!=typeof e&&!e.input)return[];var t={input:"string"==typeof e?e.toLowerCase():e.input.toLowerCase(),instrument_id:!e.instrument_id||e.instrument_id,pinyin:!e.pinyin||e.pinyin,include_expired:!!e.include_expired&&e.include_expired,FUTURE:!e.future||!!e.future,FUTURE_INDEX:!!e.future_index&&!!e.future_index,FUTURE_CONT:!!e.future_cont&&!!e.future_cont,OPTION:!!e.option&&!!e.option,COMBINE:!!e.combine&&!!e.combine},r=function(e,t,r){return!(!e[t.class]||!e.include_expired&&(e.include_expired||t.expired))&&("instrument_id"===r?t.product_id.toLowerCase()===e.input||e.input.length>2&&t.instrument_id.toLowerCase().indexOf(e.input)>-1:"pinyin"===r&&t.py.split(",").indexOf(e.input)>-1)},n=[];if(t.instrument_id)for(var o in this.quotesInfo)r(t,this.quotesInfo[o],"instrument_id")&&n.push(o);if(t.pinyin)for(var i in this.quotesInfo)r(t,this.quotesInfo[i],"pinyin")&&n.push(i);return n}},{key:"getQuote",value:function(e){if(""===e)return{};var t=this.dm.setDefault(["quotes",e],new QUOTE);if(!t.class&&this.quotesInfo[e]){var r=t.last_price?t.last_price:this.quotesInfo[e].last_price;Object.assign(t,this.quotesInfo[e],{last_price:r})}return t}},{key:"setChart",value:function(e){var t={};e.trading_day_start||e.trading_day_count?(t.trading_day_start=e.trading_day_start?e.trading_day_start:0,t.trading_day_count=e.trading_day_count?e.trading_day_count:864e11):(t.view_width=e.view_width?e.view_width:500,e.left_kline_id?t.left_kline_id=e.left_kline_id:e.focus_datetime&&(t.focus_datetime=e.focus_datetime,t.focus_position=e.focus_position?e.focus_position:0)),this.quotesWs.send(Object.assign({aid:"set_chart",chart_id:e.chart_id?e.chart_id:this._prefix+"kline_chart",ins_list:e.ins_list?e.ins_list.join(","):e.symbol,duration:e.duration},t))}},{key:"getUser",value:function(e){var t="string"==typeof e?e:e.user_id;return t?this.dm._data.trade[t]:null}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=void 0===t?"users":t,n=e.user_id,o=void 0===n?"":n,i=e.currency,s=void 0===i?"CNY":i,a=e.symbol,c=void 0===a?"":a,u=e.order_id,l=void 0===u?"":u,f=e.trade_id,d=void 0===f?"":f,h=e.trading_day,p=void 0===h?"":h,m=e.chart_id,v=void 0===m?"":m,y=e.input,_=void 0===y?"":y,g=e.duration,b=void 0===g?0:g;if("users"===r)return Object.keys(this.trade_accounts);if(o){var w=this.get_user(o);if("user"===r)return w;if(["session","accounts","positions","orders","trades","his_settlements"].indexOf(r)>-1)return w&&w[r]?w[r]:null;if(w&&w[r+"s"]){var C="account"===r?s:"position"===r?c:"order"===r?l:"trade"===r?d:"his_settlement"===r?p:"";return w[r+"s"][C]}return null}return"quotes"===r?_?this.get_quotes_by_input(_):[]:"quote"===r?this.getQuote(c):"klines"===r?this.getKlines(c,b):"ticks"===r?this.getTicks(c):"charts"===r?this.dm.getByPath(["charts"]):"chart"===r?this.dm.getByPath(["charts",v]):void 0}},{key:"getKlines",value:function(e,t){if(""===e)return null;var r=this.dm.getByPath(["klines",e,t]);return r&&r.data&&-1!==r.last_id||(this.dm.mergeData({klines:_defineProperty({},e,_defineProperty({},t,{last_id:-1,data:{}}))},!1,!1),r=this.dm.getByPath(["klines",e,t])),r}},{key:"getTicks",value:function(e){if(""===e)return null;var t=this.dm.getByPath(["ticks",e]);return t&&t.data||this.dm.mergeData({ticks:_defineProperty({},e,{last_id:-1,data:{}})},!1,!1),this.dm.getByPath(["ticks",e])}},{key:"isLogined",value:function(e){var t=this.get({name:"session",user_id:e.user_id});return!(!t||!t.trading_day)}},{key:"isChanging",value:function(e,t){return e&&e._epoch?e._epoch===this.dm._epoch:"string"==typeof e&&this.dm.isChanging(e,t)}},{key:"insertOrder",value:function(e){if(!this.is_logined(e))return null;var t=this._prefix+RandomStr(8),r={user_id:e.user_id,orderId:t,exchange_id:e.exchange_id,instrument_id:e.ins_id,direction:e.direction,offset:e.offset,price_type:e.price_type?e.price_type:"LIMIT",limit_price:Number(e.limit_price),volume_condition:"ANY",time_condition:"ANY"===e.price_type?"IOC":"GFD"},n=Object.assign({aid:"insert_order",volume:e.volume},r);this.trade_accounts[e.user_id].ws.send(n);var o=Object.assign({volume_orign:e.volume,status:"ALIVE",volume_left:e.volume},r);return this.dm.mergeData({trade:_defineProperty({},e.user_id,{orders:_defineProperty({},t,o)})},!1,!1),this.get({name:"order",user_id:e.user_id,orderId:t})}},{key:"autoInsertOrder",value:function(e){if(!this.is_logined(e))return null;var t={user_id:e.user_id,price_type:e.price_type?e.price_type:"LIMIT",volume_condition:"ANY",time_condition:"ANY"===e.price_type?"IOC":"GFD",exchange_id:e.exchange_id,instrument_id:e.ins_id,direction:e.direction,limit_price:Number(e.limit_price)};if("SHFE"===e.exchange_id&&"CLOSE"===e.offset){var r=this.dm.getPosition(e.symbol,e.user_id),n=0;"BUY"===e.direction&&r.volume_short_today>0?n=Math.min(r.volume_short_today,e.volume):"SELL"===e.direction&&r.volume_long_today>0&&(n=Math.min(r.volume_long_today,e.volume)),n>0&&this.insert_order(Object.assign({offset:"CLOSETODAY",volume:n},t)),e.volume-n>0&&this.insert_order(Object.assign({offset:"CLOSE",volume:e.volume-n},t))}else this.insert_order(Object.assign({offset:e.offset,volume:e.volume},t))}},{key:"cancelOrder",value:function(e){this.trade_accounts[e.user_id].ws.send({aid:"cancel_order",user_id:e.user_id,order_id:e.order_id?e.order_id:e})}},{key:"login",value:function(e){this.trade_accounts[e.user_id].ws.send({aid:"req_login",bid:e.bid,user_name:e.user_id,password:e.password,client_system_info:this.clientSystemInfo,client_app_id:this.clientAppId})}},{key:"confirmSettlement",value:function(e){this.trade_accounts[e.user_id].ws.send({aid:"confirm_settlement"})}},{key:"transfer",value:function(e){this.trade_accounts[e.user_id].ws.send({aid:"req_transfer",bank_id:e.bank_id,bank_password:e.bank_password,future_account:e.future_account,future_password:e.future_password,currency:"CNY",amount:e.amount})}},{key:"hisSettlement",value:function(e){if(!t.store)return null;var r=this.dm.getByPath(["trade",e.user_id,"his_settlements",e.trading_day]);if(void 0===r){var n=this;r=t.store.getContent(e.user_id,e.trading_day).then((function(t){if(null===t)n.trade_accounts[e.user_id].ws.send({aid:"qry_settlement_info",trading_day:Number(e.trading_day)});else{var r=ParseSettlementContent(t);n.dm.mergeData({trade:_defineProperty({},e.user_id,{his_settlements:_defineProperty({},e.trading_day,r)})},!0,!1)}})).catch((function(e){console.error(e)}))}}},{key:"subscribeQuote",value:function(e){this.quotesWs.send({aid:"subscribe_quote",ins_list:Array.isArray(e)?e.join(","):e})}}]),t}(eventemitter3);TQSDK.prototype.subscribe_quote=TQSDK.prototype.subscribeQuote,TQSDK.prototype.his_settlement=TQSDK.prototype.hisSettlement,TQSDK.prototype.confirm_settlement=TQSDK.prototype.confirmSettlement,TQSDK.prototype.add_account=TQSDK.prototype.addAccount,TQSDK.prototype.remove_account=TQSDK.prototype.removeAccount,TQSDK.prototype.update_data=TQSDK.prototype.updateData,TQSDK.prototype.get_by_path=TQSDK.prototype.getByPath,TQSDK.prototype.get_quotes_by_input=TQSDK.prototype.getQuotesByInput,TQSDK.prototype.get_quote=TQSDK.prototype.getQuote,TQSDK.prototype.set_chart=TQSDK.prototype.setChart,TQSDK.prototype.get_user=TQSDK.prototype.getUser,TQSDK.prototype.is_logined=TQSDK.prototype.isLogined,TQSDK.prototype.is_changed=TQSDK.prototype.isChanging,TQSDK.prototype.insert_order=TQSDK.prototype.insertOrder,TQSDK.prototype.auto_insert_order=TQSDK.prototype.autoInsertOrder,TQSDK.prototype.cancel_order=TQSDK.prototype.cancelOrder;var localforage=createCommonjsModule((function(e,t){
/*!
        localForage -- Offline Storage, Improved
        Version 1.7.3
        https://localforage.github.io/localForage
        (c) 2013-2017 Mozilla, Apache License 2.0
    */
e.exports=function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){var c="function"==typeof commonjsRequire&&commonjsRequire;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[s]={exports:{}};t[s][0].call(l.exports,(function(e){var r=t[s][1][e];return o(r||e)}),l,l.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof commonjsRequire&&commonjsRequire,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){(function(e){var r,n,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,s=new o(l),a=e.document.createTextNode("");s.observe(a,{characterData:!0}),r=function(){a.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var c=new e.MessageChannel;c.port1.onmessage=l,r=function(){c.port2.postMessage(0)}}var u=[];function l(){var e,t;n=!0;for(var r=u.length;r;){for(t=u,u=[],e=-1;++e<r;)t[e]();r=u.length}n=!1}t.exports=function(e){1!==u.push(e)||n||r()}}).call(this,void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,r){var n=e(1);function o(){}var i={},s=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==o&&h(this,e)}function l(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(e,t,r){n((function(){var n;try{n=t(r)}catch(t){return i.reject(e,t)}n===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,n)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var r=!1;function n(t){r||(r=!0,i.reject(e,t))}function o(t){r||(r=!0,i.resolve(e,t))}var s=p((function(){t(o,n)}));"error"===s.status&&n(s.value)}function p(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}t.exports=u,u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s)return this;var r=new this.constructor(o);return this.state!==c?f(r,this.state===a?e:t,this.outcome):this.queue.push(new l(r,e,t)),r},l.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){i.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},i.resolve=function(e,t){var r=p(d,t);if("error"===r.status)return i.reject(e,r.value);var n=r.value;if(n)h(e,n);else{e.state=a,e.outcome=t;for(var o=-1,s=e.queue.length;++o<s;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=s,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},u.resolve=function(e){return e instanceof this?e:i.resolve(new this(o),e)},u.reject=function(e){var t=new this(o);return i.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var s=new Array(r),a=0,c=-1,u=new this(o);++c<r;)l(e[c],c);return u;function l(e,o){t.resolve(e).then((function(e){s[o]=e,++a!==r||n||(n=!0,i.resolve(u,s))}),(function(e){n||(n=!0,i.reject(u,e))}))}},u.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var s,a=-1,c=new this(o);++a<r;)s=e[a],t.resolve(s).then((function(e){n||(n=!0,i.resolve(c,e))}),(function(e){n||(n=!0,i.reject(c,e))}));return c}},{1:1}],3:[function(e,t,r){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function i(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var s=Promise;function a(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function c(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function u(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function l(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var f="local-forage-detect-blob-support",d=void 0,h={},p=Object.prototype.toString,m="readonly",v="readwrite";function y(e){return"boolean"==typeof d?s.resolve(d):function(e){return new s((function(t){var r=e.transaction(f,v),n=i([""]);r.objectStore(f).put(n,"key"),r.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},r.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}(e).then((function(e){return d=e}))}function _(e){var t=h[e.name],r={};r.promise=new s((function(e,t){r.resolve=e,r.reject=t})),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then((function(){return r.promise})):t.dbReady=r.promise}function g(e){var t=h[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function b(e,t){var r=h[e.name].deferredOperations.pop();if(r)return r.reject(t),r.promise}function w(e,t){return new s((function(r,n){if(h[e.name]=h[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return r(e.db);_(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var s=o.open.apply(o,i);t&&(s.onupgradeneeded=function(t){var r=s.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore(f)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),s.onerror=function(e){e.preventDefault(),n(s.error)},s.onsuccess=function(){r(s.result),g(e)}}))}function C(e){return w(e,!1)}function S(e){return w(e,!0)}function O(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,o=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||r){if(r){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function E(e){return i([function(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=0;o<t;o++)n[o]=e.charCodeAt(o);return r}(atob(e.data))],{type:e.type})}function T(e){return e&&e.__local_forage_encoded_blob}function k(e){var t=this,r=t._initReady().then((function(){var e=h[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return c(r,e,e),r}function x(e,t,r,n){void 0===n&&(n=1);try{var o=e.db.transaction(e.storeName,t);r(null,o)}catch(o){if(n>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return s.resolve().then((function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),S(e)})).then((function(){return function(e){_(e);for(var t=h[e.name],r=t.forages,n=0;n<r.length;n++){var o=r[n];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,C(e).then((function(t){return e.db=t,O(e)?S(e):t})).then((function(n){e.db=t.db=n;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=n})).catch((function(t){throw b(e,t),t}))}(e).then((function(){x(e,t,r,n-1)}))})).catch(r);r(o)}}var I={_driver:"asyncStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]=e[n];var o=h[r.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},h[r.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=k);var i=[];function a(){return s.resolve()}for(var c=0;c<o.forages.length;c++){var u=o.forages[c];u!==t&&i.push(u._initReady().catch(a))}var l=o.forages.slice(0);return s.all(i).then((function(){return r.db=o.db,C(r)})).then((function(e){return r.db=e,O(r,t._defaultConfig.version)?S(r):e})).then((function(e){r.db=o.db=e,t._dbInfo=r;for(var n=0;n<l.length;n++){var i=l[n];i!==t&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}}))},_support:function(){try{if(!o)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var r=this,n=new s((function(t,n){r.ready().then((function(){x(r._dbInfo,m,(function(o,i){if(o)return n(o);try{var s=i.objectStore(r._dbInfo.storeName).openCursor(),a=1;s.onsuccess=function(){var r=s.result;if(r){var n=r.value;T(n)&&(n=E(n));var o=e(n,r.key,a++);void 0!==o?t(o):r.continue()}else t()},s.onerror=function(){n(s.error)}}catch(e){n(e)}}))})).catch(n)}));return a(n,t),n},getItem:function(e,t){var r=this;e=u(e);var n=new s((function(t,n){r.ready().then((function(){x(r._dbInfo,m,(function(o,i){if(o)return n(o);try{var s=i.objectStore(r._dbInfo.storeName).get(e);s.onsuccess=function(){var e=s.result;void 0===e&&(e=null),T(e)&&(e=E(e)),t(e)},s.onerror=function(){n(s.error)}}catch(e){n(e)}}))})).catch(n)}));return a(n,t),n},setItem:function(e,t,r){var n=this;e=u(e);var o=new s((function(r,o){var i;n.ready().then((function(){return i=n._dbInfo,"[object Blob]"===p.call(t)?y(i.db).then((function(e){return e?t:(r=t,new s((function(e,t){var n=new FileReader;n.onerror=t,n.onloadend=function(t){var n=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:n,type:r.type})},n.readAsBinaryString(r)})));var r})):t})).then((function(t){x(n._dbInfo,v,(function(i,s){if(i)return o(i);try{var a=s.objectStore(n._dbInfo.storeName);null===t&&(t=void 0);var c=a.put(t,e);s.oncomplete=function(){void 0===t&&(t=null),r(t)},s.onabort=s.onerror=function(){var e=c.error?c.error:c.transaction.error;o(e)}}catch(e){o(e)}}))})).catch(o)}));return a(o,r),o},removeItem:function(e,t){var r=this;e=u(e);var n=new s((function(t,n){r.ready().then((function(){x(r._dbInfo,v,(function(o,i){if(o)return n(o);try{var s=i.objectStore(r._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){n(s.error)},i.onabort=function(){var e=s.error?s.error:s.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return a(n,t),n},clear:function(e){var t=this,r=new s((function(e,r){t.ready().then((function(){x(t._dbInfo,v,(function(n,o){if(n)return r(n);try{var i=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error?i.error:i.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return a(r,e),r},length:function(e){var t=this,r=new s((function(e,r){t.ready().then((function(){x(t._dbInfo,m,(function(n,o){if(n)return r(n);try{var i=o.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){r(i.error)}}catch(e){r(e)}}))})).catch(r)}));return a(r,e),r},key:function(e,t){var r=this,n=new s((function(t,n){e<0?t(null):r.ready().then((function(){x(r._dbInfo,m,(function(o,i){if(o)return n(o);try{var s=i.objectStore(r._dbInfo.storeName),a=!1,c=s.openCursor();c.onsuccess=function(){var r=c.result;r?0===e?t(r.key):a?t(r.key):(a=!0,r.advance(e)):t(null)},c.onerror=function(){n(c.error)}}catch(e){n(e)}}))})).catch(n)}));return a(n,t),n},keys:function(e){var t=this,r=new s((function(e,r){t.ready().then((function(){x(t._dbInfo,m,(function(n,o){if(n)return r(n);try{var i=o.objectStore(t._dbInfo.storeName).openCursor(),s=[];i.onsuccess=function(){var t=i.result;t?(s.push(t.key),t.continue()):e(s)},i.onerror=function(){r(i.error)}}catch(e){r(e)}}))})).catch(r)}));return a(r,e),r},dropInstance:function(e,t){t=l.apply(this,arguments);var r,n=this.config();if((e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName),e.name){var i=e.name===n.name&&this._dbInfo.db?s.resolve(this._dbInfo.db):C(e).then((function(t){var r=h[e.name],n=r.forages;r.db=t;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=t;return t}));r=e.storeName?i.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var r=t.version+1;_(e);var n=h[e.name],i=n.forages;t.close();for(var a=0;a<i.length;a++){var c=i[a];c._dbInfo.db=null,c._dbInfo.version=r}return new s((function(t,n){var i=o.open(e.name,r);i.onerror=function(e){i.result.close(),n(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<i.length;t++){var r=i[t];r._dbInfo.db=e,g(r._dbInfo)}})).catch((function(t){throw(b(e,t)||s.resolve()).catch((function(){})),t}))}})):i.then((function(t){_(e);var r=h[e.name],n=r.forages;t.close();for(var i=0;i<n.length;i++)n[i]._dbInfo.db=null;return new s((function(t,r){var n=o.deleteDatabase(e.name);n.onerror=n.onblocked=function(e){var t=n.result;t&&t.close(),r(e)},n.onsuccess=function(){var e=n.result;e&&e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<n.length;t++)g(n[t]._dbInfo)})).catch((function(t){throw(b(e,t)||s.resolve()).catch((function(){})),t}))}))}else r=s.reject("Invalid arguments");return a(r,t),r}},R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j="~~local_forage_type~",D=/^~~local_forage_type~([^~]+)~/,A="__lfsc__:",N=A.length,q="arbf",P="blob",F="si08",B="ui08",L="uic8",M="si16",U="si32",$="ur16",z="ui32",K="fl32",Q="fl64",W=N+q.length,G=Object.prototype.toString;function H(e){var t,r,n,o,i,s=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var u=new ArrayBuffer(s),l=new Uint8Array(u);for(t=0;t<a;t+=4)r=R.indexOf(e[t]),n=R.indexOf(e[t+1]),o=R.indexOf(e[t+2]),i=R.indexOf(e[t+3]),l[c++]=r<<2|n>>4,l[c++]=(15&n)<<4|o>>2,l[c++]=(3&o)<<6|63&i;return u}function Y(e){var t,r=new Uint8Array(e),n="";for(t=0;t<r.length;t+=3)n+=R[r[t]>>2],n+=R[(3&r[t])<<4|r[t+1]>>4],n+=R[(15&r[t+1])<<2|r[t+2]>>6],n+=R[63&r[t+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}var V={serialize:function(e,t){var r="";if(e&&(r=G.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===G.call(e.buffer))){var n,o=A;e instanceof ArrayBuffer?(n=e,o+=q):(n=e.buffer,"[object Int8Array]"===r?o+=F:"[object Uint8Array]"===r?o+=B:"[object Uint8ClampedArray]"===r?o+=L:"[object Int16Array]"===r?o+=M:"[object Uint16Array]"===r?o+=$:"[object Int32Array]"===r?o+=U:"[object Uint32Array]"===r?o+=z:"[object Float32Array]"===r?o+=K:"[object Float64Array]"===r?o+=Q:t(new Error("Failed to get type for BinaryArray"))),t(o+Y(n))}else if("[object Blob]"===r){var i=new FileReader;i.onload=function(){var r=j+e.type+"~"+Y(this.result);t(A+P+r)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(r){console.error("Couldn't convert value into a JSON string: ",e),t(null,r)}},deserialize:function(e){if(e.substring(0,N)!==A)return JSON.parse(e);var t,r=e.substring(W),n=e.substring(N,W);if(n===P&&D.test(r)){var o=r.match(D);t=o[1],r=r.substring(o[0].length)}var s=H(r);switch(n){case q:return s;case P:return i([s],{type:t});case F:return new Int8Array(s);case B:return new Uint8Array(s);case L:return new Uint8ClampedArray(s);case M:return new Int16Array(s);case $:return new Uint16Array(s);case U:return new Int32Array(s);case z:return new Uint32Array(s);case K:return new Float32Array(s);case Q:return new Float64Array(s);default:throw new Error("Unkown type: "+n)}},stringToBuffer:H,bufferToString:Y};function X(e,t,r,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function J(e,t,r,n,o,i){e.executeSql(r,n,o,(function(e,s){s.code===s.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?i(e,s):X(e,t,(function(){e.executeSql(r,n,o,i)}),i)}),i):i(e,s)}),i)}function Z(e,t,r,n){var o=this;e=u(e);var i=new s((function(i,s){o.ready().then((function(){void 0===t&&(t=null);var a=t,c=o._dbInfo;c.serializer.serialize(t,(function(t,u){u?s(u):c.db.transaction((function(r){J(r,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(a)}),(function(e,t){s(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(n>0)return void i(Z.apply(o,[e,a,r,n-1]));s(t)}}))}))})).catch(s)}));return a(i,r),i}var ee={_driver:"webSQLStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]="string"!=typeof e[n]?e[n].toString():e[n];var o=new s((function(e,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(e){return n(e)}r.db.transaction((function(o){X(o,r,(function(){t._dbInfo=r,e()}),(function(e,t){n(t)}))}),n)}));return r.serializer=V,o},_support:"function"==typeof openDatabase,iterate:function(e,t){var r=this,n=new s((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){J(r,o,"SELECT * FROM "+o.storeName,[],(function(r,n){for(var i=n.rows,s=i.length,a=0;a<s;a++){var c=i.item(a),u=c.value;if(u&&(u=o.serializer.deserialize(u)),void 0!==(u=e(u,c.key,a+1)))return void t(u)}t()}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,t),n},getItem:function(e,t){var r=this;e=u(e);var n=new s((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){J(r,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=o.serializer.deserialize(n)),t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,t),n},setItem:function(e,t,r){return Z.apply(this,[e,t,r,1])},removeItem:function(e,t){var r=this;e=u(e);var n=new s((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){J(r,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,t),n},clear:function(e){var t=this,r=new s((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){J(t,n,"DELETE FROM "+n.storeName,[],(function(){e()}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,e),r},length:function(e){var t=this,r=new s((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){J(t,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(t,r){var n=r.rows.item(0).c;e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,e),r},key:function(e,t){var r=this,n=new s((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){J(r,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,r){var n=r.rows.length?r.rows.item(0).key:null;t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,t),n},keys:function(e){var t=this,r=new s((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){J(t,n,"SELECT key FROM "+n.storeName,[],(function(t,r){for(var n=[],o=0;o<r.rows.length;o++)n.push(r.rows.item(o).key);e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,e),r},dropInstance:function(e,t){t=l.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,o=this;return a(n=e.name?new s((function(t){var n;n=e.name===r.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:n,storeNames:[e.storeName]}):t(function(e){return new s((function(t,r){e.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(r,n){for(var o=[],i=0;i<n.rows.length;i++)o.push(n.rows.item(i).name);t({db:e,storeNames:o})}),(function(e,t){r(t)}))}),(function(e){r(e)}))}))}(n))})).then((function(e){return new s((function(t,r){e.db.transaction((function(n){function o(e){return new s((function(t,r){n.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){r(t)}))}))}for(var i=[],a=0,c=e.storeNames.length;a<c;a++)i.push(o(e.storeNames[a]));s.all(i).then((function(){t()})).catch((function(e){r(e)}))}),(function(e){r(e)}))}))})):s.reject("Invalid arguments"),t),n}};function te(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}function re(){return!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(e){return!0}}()||localStorage.length>0}var ne={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var r in e)t[r]=e[r];return t.keyPrefix=te(e,this._defaultConfig),re()?(this._dbInfo=t,t.serializer=V,s.resolve()):s.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var r=this,n=r.ready().then((function(){for(var t=r._dbInfo,n=t.keyPrefix,o=n.length,i=localStorage.length,s=1,a=0;a<i;a++){var c=localStorage.key(a);if(0===c.indexOf(n)){var u=localStorage.getItem(c);if(u&&(u=t.serializer.deserialize(u)),void 0!==(u=e(u,c.substring(o),s++)))return u}}}));return a(n,t),n},getItem:function(e,t){var r=this;e=u(e);var n=r.ready().then((function(){var t=r._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&(n=t.serializer.deserialize(n)),n}));return a(n,t),n},setItem:function(e,t,r){var n=this;e=u(e);var o=n.ready().then((function(){void 0===t&&(t=null);var r=t;return new s((function(o,i){var s=n._dbInfo;s.serializer.serialize(t,(function(t,n){if(n)i(n);else try{localStorage.setItem(s.keyPrefix+e,t),o(r)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||i(e),i(e)}}))}))}));return a(o,r),o},removeItem:function(e,t){var r=this;e=u(e);var n=r.ready().then((function(){var t=r._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return a(n,t),n},clear:function(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(e)&&localStorage.removeItem(n)}}));return a(r,e),r},length:function(e){var t=this.keys().then((function(e){return e.length}));return a(t,e),t},key:function(e,t){var r=this,n=r.ready().then((function(){var t,n=r._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(n.keyPrefix.length)),t}));return a(n,t),n},keys:function(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo,r=localStorage.length,n=[],o=0;o<r;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&n.push(i.substring(e.keyPrefix.length))}return n}));return a(r,e),r},dropInstance:function(e,t){if(t=l.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var n,o=this;return a(n=e.name?new s((function(t){e.storeName?t(te(e,o._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}})):s.reject("Invalid arguments"),t),n}},oe=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},ie=function(e,t){for(var r=e.length,n=0;n<r;){if(oe(e[n],t))return!0;n++}return!1},se=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},ae={},ce={},ue={INDEXEDDB:I,WEBSQL:ee,LOCALSTORAGE:ne},le=[ue.INDEXEDDB._driver,ue.WEBSQL._driver,ue.LOCALSTORAGE._driver],fe=["dropInstance"],de=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(fe),he={description:"",driver:le.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function pe(e,t){e[t]=function(){var r=arguments;return e.ready().then((function(){return e[t].apply(e,r)}))}}function me(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var r in t)t.hasOwnProperty(r)&&(se(t[r])?arguments[0][r]=t[r].slice():arguments[0][r]=t[r])}return arguments[0]}var ve=new(function(){function e(t){for(var r in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ue)if(ue.hasOwnProperty(r)){var n=ue[r],o=n._driver;this[r]=o,ae[o]||this.defineDriver(n)}this._defaultConfig=me({},he),this._config=me({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":n(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,r){var n=new s((function(t,r){try{var n=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void r(o);for(var i=de.concat("_initStorage"),c=0,u=i.length;c<u;c++){var l=i[c];if((!ie(fe,l)||e[l])&&"function"!=typeof e[l])return void r(o)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),r=s.reject(t);return a(r,arguments[arguments.length-1]),r}},r=0,n=fe.length;r<n;r++){var o=fe[r];e[o]||(e[o]=t(o))}}();var f=function(r){ae[n]&&console.info("Redefining LocalForage driver: "+n),ae[n]=e,ce[n]=r,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(f,r):f(!!e._support):f(!0)}catch(e){r(e)}}));return c(n,t,r),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,r){var n=ae[e]?s.resolve(ae[e]):s.reject(new Error("Driver not found."));return c(n,t,r),n},e.prototype.getSerializer=function(e){var t=s.resolve(V);return c(t,e),t},e.prototype.ready=function(e){var t=this,r=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return c(r,e,e),r},e.prototype.setDriver=function(e,t,r){var n=this;se(e)||(e=[e]);var o=this._getSupportedDrivers(e);function i(){n._config.driver=n.driver()}function a(e){return n._extend(e),i(),n._ready=n._initStorage(n._config),n._ready}var u=null!==this._driverSet?this._driverSet.catch((function(){return s.resolve()})):s.resolve();return this._driverSet=u.then((function(){var e=o[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then((function(e){n._driver=e._driver,i(),n._wrapLibraryMethodsWithReady(),n._initDriver=function(e){return function(){var t=0;return function r(){for(;t<e.length;){var o=e[t];return t++,n._dbInfo=null,n._ready=null,n.getDriver(o).then(a).catch(r)}i();var c=new Error("No available storage method found.");return n._driverSet=s.reject(c),n._driverSet}()}}(o)}))})).catch((function(){i();var e=new Error("No available storage method found.");return n._driverSet=s.reject(e),n._driverSet})),c(this._driverSet,t,r),this._driverSet},e.prototype.supports=function(e){return!!ce[e]},e.prototype._extend=function(e){me(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var o=e[r];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=de.length;e<t;e++)pe(this,de[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=ve},{3:3}]},{},[4])(4)}));TQSDK.axios=axios$1,TQSDK.TqWebsocket=TqWebsocket,TQSDK.TQData=DataManager,TQSDK.version=version;var DB_NAME="his_settlements",stores={},oldVersion=localStorage.getItem("cc_db_ver");if(oldVersion!==db_version){var DBDeleteRequest=indexedDB.deleteDatabase(DB_NAME);DBDeleteRequest.onerror=function(e){console.log("Error deleting database.")},DBDeleteRequest.onsuccess=function(e){localStorage.setItem("cc_db_ver",db_version)}}return TQSDK.store={getContent:function(e,t){return void 0===stores[e]&&(stores[e]=localforage.createInstance({name:DB_NAME,storeName:e})),stores[e].getItem(String(t))},setContent:function(e,t,r){return void 0===stores[e]&&(stores[e]=localforage.createInstance({name:DB_NAME,storeName:e})),stores[e].setItem(String(t),r)}},TQSDK}));
