!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("http"),require("https"),require("url"),require("assert"),require("stream"),require("tty"),require("util"),require("os"),require("zlib")):"function"==typeof define&&define.amd?define(["http","https","url","assert","stream","tty","util","os","zlib"],t):(e=e||self).TQSDK=t(e.http,e.https,e.url,e.assert,e.stream,e.tty,e.util,e.os,e.zlib)}(this,(function(http,https,url,assert,stream,tty,util,os,zlib){"use strict";http=http&&http.hasOwnProperty("default")?http.default:http,https=https&&https.hasOwnProperty("default")?https.default:https,url=url&&url.hasOwnProperty("default")?url.default:url,assert=assert&&assert.hasOwnProperty("default")?assert.default:assert,stream=stream&&stream.hasOwnProperty("default")?stream.default:stream,tty=tty&&tty.hasOwnProperty("default")?tty.default:tty,util=util&&util.hasOwnProperty("default")?util.default:util,os=os&&os.hasOwnProperty("default")?os.default:os,zlib=zlib&&zlib.hasOwnProperty("default")?zlib.default:zlib;var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}function getCjsExportFromNamespace(e){return e&&e.default||e}var check=function(e){return e&&e.Math==Math&&e},global_1=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof commonjsGlobal&&commonjsGlobal)||Function("return this")(),fails=function(e){try{return!!e()}catch(e){return!0}},descriptors=!fails((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),nativePropertyIsEnumerable={}.propertyIsEnumerable,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor&&!nativePropertyIsEnumerable.call({1:2},1),f=NASHORN_BUG?function(e){var t=getOwnPropertyDescriptor(this,e);return!!t&&t.enumerable}:nativePropertyIsEnumerable,objectPropertyIsEnumerable={f:f},createPropertyDescriptor=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},toString={}.toString,classofRaw=function(e){return toString.call(e).slice(8,-1)},split="".split,indexedObject=fails((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==classofRaw(e)?split.call(e,""):Object(e)}:Object,requireObjectCoercible=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},toIndexedObject=function(e){return indexedObject(requireObjectCoercible(e))},isObject=function(e){return"object"==typeof e?null!==e:"function"==typeof e},toPrimitive=function(e,t){if(!isObject(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!isObject(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!isObject(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!isObject(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},hasOwnProperty={}.hasOwnProperty,has=function(e,t){return hasOwnProperty.call(e,t)},document$1=global_1.document,EXISTS=isObject(document$1)&&isObject(document$1.createElement),documentCreateElement=function(e){return EXISTS?document$1.createElement(e):{}},ie8DomDefine=!descriptors&&!fails((function(){return 7!=Object.defineProperty(documentCreateElement("div"),"a",{get:function(){return 7}}).a})),nativeGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,f$1=descriptors?nativeGetOwnPropertyDescriptor:function(e,t){if(e=toIndexedObject(e),t=toPrimitive(t,!0),ie8DomDefine)try{return nativeGetOwnPropertyDescriptor(e,t)}catch(e){}if(has(e,t))return createPropertyDescriptor(!objectPropertyIsEnumerable.f.call(e,t),e[t])},objectGetOwnPropertyDescriptor={f:f$1},anObject=function(e){if(!isObject(e))throw TypeError(String(e)+" is not an object");return e},nativeDefineProperty=Object.defineProperty,f$2=descriptors?nativeDefineProperty:function(e,t,r){if(anObject(e),t=toPrimitive(t,!0),anObject(r),ie8DomDefine)try{return nativeDefineProperty(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e},objectDefineProperty={f:f$2},createNonEnumerableProperty=descriptors?function(e,t,r){return objectDefineProperty.f(e,t,createPropertyDescriptor(1,r))}:function(e,t,r){return e[t]=r,e},setGlobal=function(e,t){try{createNonEnumerableProperty(global_1,e,t)}catch(r){global_1[e]=t}return t},SHARED="__core-js_shared__",store=global_1[SHARED]||setGlobal(SHARED,{}),sharedStore=store,shared=createCommonjsModule((function(e){(e.exports=function(e,t){return sharedStore[e]||(sharedStore[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.4.4",mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})})),functionToString=shared("native-function-to-string",Function.toString),WeakMap=global_1.WeakMap,nativeWeakMap="function"==typeof WeakMap&&/native code/.test(functionToString.call(WeakMap)),id=0,postfix=Math.random(),uid=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++id+postfix).toString(36)},keys=shared("keys"),sharedKey=function(e){return keys[e]||(keys[e]=uid(e))},hiddenKeys={},WeakMap$1=global_1.WeakMap,set,get,has$1,enforce=function(e){return has$1(e)?get(e):set(e,{})},getterFor=function(e){return function(t){var r;if(!isObject(t)||(r=get(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}};if(nativeWeakMap){var store$1=new WeakMap$1,wmget=store$1.get,wmhas=store$1.has,wmset=store$1.set;set=function(e,t){return wmset.call(store$1,e,t),t},get=function(e){return wmget.call(store$1,e)||{}},has$1=function(e){return wmhas.call(store$1,e)}}else{var STATE=sharedKey("state");hiddenKeys[STATE]=!0,set=function(e,t){return createNonEnumerableProperty(e,STATE,t),t},get=function(e){return has(e,STATE)?e[STATE]:{}},has$1=function(e){return has(e,STATE)}}var internalState={set:set,get:get,has:has$1,enforce:enforce,getterFor:getterFor},redefine=createCommonjsModule((function(e){var t=internalState.get,r=internalState.enforce,n=String(functionToString).split("toString");shared("inspectSource",(function(e){return functionToString.call(e)})),(e.exports=function(e,t,o,s){var i=!!s&&!!s.unsafe,a=!!s&&!!s.enumerable,c=!!s&&!!s.noTargetGet;"function"==typeof o&&("string"!=typeof t||has(o,"name")||createNonEnumerableProperty(o,"name",t),r(o).source=n.join("string"==typeof t?t:"")),e!==global_1?(i?!c&&e[t]&&(a=!0):delete e[t],a?e[t]=o:createNonEnumerableProperty(e,t,o)):a?e[t]=o:setGlobal(t,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||functionToString.call(this)}))})),path=global_1,aFunction=function(e){return"function"==typeof e?e:void 0},getBuiltIn=function(e,t){return arguments.length<2?aFunction(path[e])||aFunction(global_1[e]):path[e]&&path[e][t]||global_1[e]&&global_1[e][t]},ceil=Math.ceil,floor=Math.floor,toInteger=function(e){return isNaN(e=+e)?0:(e>0?floor:ceil)(e)},min=Math.min,toLength=function(e){return e>0?min(toInteger(e),9007199254740991):0},max=Math.max,min$1=Math.min,toAbsoluteIndex=function(e,t){var r=toInteger(e);return r<0?max(r+t,0):min$1(r,t)},createMethod=function(e){return function(t,r,n){var o,s=toIndexedObject(t),i=toLength(s.length),a=toAbsoluteIndex(n,i);if(e&&r!=r){for(;i>a;)if((o=s[a++])!=o)return!0}else for(;i>a;a++)if((e||a in s)&&s[a]===r)return e||a||0;return!e&&-1}},arrayIncludes={includes:createMethod(!0),indexOf:createMethod(!1)},indexOf=arrayIncludes.indexOf,objectKeysInternal=function(e,t){var r,n=toIndexedObject(e),o=0,s=[];for(r in n)!has(hiddenKeys,r)&&has(n,r)&&s.push(r);for(;t.length>o;)has(n,r=t[o++])&&(~indexOf(s,r)||s.push(r));return s},enumBugKeys=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],hiddenKeys$1=enumBugKeys.concat("length","prototype"),f$3=Object.getOwnPropertyNames||function(e){return objectKeysInternal(e,hiddenKeys$1)},objectGetOwnPropertyNames={f:f$3},f$4=Object.getOwnPropertySymbols,objectGetOwnPropertySymbols={f:f$4},ownKeys=getBuiltIn("Reflect","ownKeys")||function(e){var t=objectGetOwnPropertyNames.f(anObject(e)),r=objectGetOwnPropertySymbols.f;return r?t.concat(r(e)):t},copyConstructorProperties=function(e,t){for(var r=ownKeys(t),n=objectDefineProperty.f,o=objectGetOwnPropertyDescriptor.f,s=0;s<r.length;s++){var i=r[s];has(e,i)||n(e,i,o(t,i))}},replacement=/#|\.prototype\./,isForced=function(e,t){var r=data[normalize(e)];return r==POLYFILL||r!=NATIVE&&("function"==typeof t?fails(t):!!t)},normalize=isForced.normalize=function(e){return String(e).replace(replacement,".").toLowerCase()},data=isForced.data={},NATIVE=isForced.NATIVE="N",POLYFILL=isForced.POLYFILL="P",isForced_1=isForced,getOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f,_export=function(e,t){var r,n,o,s,i,a=e.target,c=e.global,u=e.stat;if(r=c?global_1:u?global_1[a]||setGlobal(a,{}):(global_1[a]||{}).prototype)for(n in t){if(s=t[n],o=e.noTargetGet?(i=getOwnPropertyDescriptor$1(r,n))&&i.value:r[n],!isForced_1(c?n:a+(u?".":"#")+n,e.forced)&&void 0!==o){if(typeof s==typeof o)continue;copyConstructorProperties(s,o)}(e.sham||o&&o.sham)&&createNonEnumerableProperty(s,"sham",!0),redefine(r,n,s,e)}},aFunction$1=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},bindContext=function(e,t,r){if(aFunction$1(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}},html=getBuiltIn("document","documentElement"),userAgent=getBuiltIn("navigator","userAgent")||"",isIos=/(iphone|ipod|ipad).*applewebkit/i.test(userAgent),location=global_1.location,set$1=global_1.setImmediate,clear=global_1.clearImmediate,process$1=global_1.process,MessageChannel=global_1.MessageChannel,Dispatch=global_1.Dispatch,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",defer,channel,port,run=function(e){if(queue.hasOwnProperty(e)){var t=queue[e];delete queue[e],t()}},runner=function(e){return function(){run(e)}},listener=function(e){run(e.data)},post=function(e){global_1.postMessage(e+"",location.protocol+"//"+location.host)};set$1&&clear||(set$1=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return queue[++counter]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},defer(counter),counter},clear=function(e){delete queue[e]},"process"==classofRaw(process$1)?defer=function(e){process$1.nextTick(runner(e))}:Dispatch&&Dispatch.now?defer=function(e){Dispatch.now(runner(e))}:MessageChannel&&!isIos?(channel=new MessageChannel,port=channel.port2,channel.port1.onmessage=listener,defer=bindContext(port.postMessage,port,1)):!global_1.addEventListener||"function"!=typeof postMessage||global_1.importScripts||fails(post)?defer=ONREADYSTATECHANGE in documentCreateElement("script")?function(e){html.appendChild(documentCreateElement("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run(e)}}:function(e){setTimeout(runner(e),0)}:(defer=post,global_1.addEventListener("message",listener,!1)));var task={set:set$1,clear:clear},FORCED=!global_1.setImmediate||!global_1.clearImmediate;_export({global:!0,bind:!0,enumerable:!0,forced:FORCED},{setImmediate:task.set,clearImmediate:task.clear});var setImmediate$1=path.setImmediate,version="1.1.9";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=_superPropBase(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}var bind=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}},isBuffer_1=function(e){return null!=e&&(isBuffer(e)||isSlowBuffer(e)||!!e._isBuffer)};
/*!
	 * Determine if an object is a Buffer
	 *
	 * @author   Feross Aboukhadijeh <https://feross.org>
	 * @license  MIT
	 */function isBuffer(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&isBuffer(e.slice(0,0))}var toString$1=Object.prototype.toString;function isArray(e){return"[object Array]"===toString$1.call(e)}function isArrayBuffer(e){return"[object ArrayBuffer]"===toString$1.call(e)}function isFormData(e){return"undefined"!=typeof FormData&&e instanceof FormData}function isArrayBufferView(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function isString(e){return"string"==typeof e}function isNumber(e){return"number"==typeof e}function isUndefined(e){return void 0===e}function isObject$1(e){return null!==e&&"object"==typeof e}function isDate(e){return"[object Date]"===toString$1.call(e)}function isFile(e){return"[object File]"===toString$1.call(e)}function isBlob(e){return"[object Blob]"===toString$1.call(e)}function isFunction(e){return"[object Function]"===toString$1.call(e)}function isStream(e){return isObject$1(e)&&isFunction(e.pipe)}function isURLSearchParams(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function trim(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function isStandardBrowserEnv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function forEach(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),isArray(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function merge(){var e={};function t(t,r){"object"==typeof e[r]&&"object"==typeof t?e[r]=merge(e[r],t):e[r]=t}for(var r=0,n=arguments.length;r<n;r++)forEach(arguments[r],t);return e}function extend(e,t,r){return forEach(t,(function(t,n){e[n]=r&&"function"==typeof t?bind(t,r):t})),e}var utils={isArray:isArray,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer_1,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString,isNumber:isNumber,isObject:isObject$1,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isFunction:isFunction,isStream:isStream,isURLSearchParams:isURLSearchParams,isStandardBrowserEnv:isStandardBrowserEnv,forEach:forEach,merge:merge,extend:extend,trim:trim},normalizeHeaderName=function(e,t){utils.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))},enhanceError=function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e},createError=function(e,t,r,n,o){var s=new Error(e);return enhanceError(s,t,r,n,o)},settle=function(e,t,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(createError("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)};function encode(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL=function(e,t,r){if(!t)return e;var n;if(r)n=r(t);else if(utils.isURLSearchParams(t))n=t.toString();else{var o=[];utils.forEach(t,(function(e,t){null!=e&&(utils.isArray(e)?t+="[]":e=[e],utils.forEach(e,(function(e){utils.isDate(e)?e=e.toISOString():utils.isObject(e)&&(e=JSON.stringify(e)),o.push(encode(t)+"="+encode(e))})))})),n=o.join("&")}return n&&(e+=(-1===e.indexOf("?")?"?":"&")+n),e},ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],parseHeaders=function(e){var t,r,n,o={};return e?(utils.forEach(e.split("\n"),(function(e){if(n=e.indexOf(":"),t=utils.trim(e.substr(0,n)).toLowerCase(),r=utils.trim(e.substr(n+1)),t){if(o[t]&&ignoreDuplicateOf.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([r]):o[t]?o[t]+", "+r:r}})),o):o},isURLSameOrigin=utils.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(t){var r=utils.isString(t)?n(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0},chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function E(){this.message="String contains an invalid character"}function btoa(e){for(var t,r,n=String(e),o="",s=0,i=chars;n.charAt(0|s)||(i="=",s%1);o+=i.charAt(63&t>>8-s%1*8)){if((r=n.charCodeAt(s+=.75))>255)throw new E;t=t<<8|r}return o}E.prototype=new Error,E.prototype.code=5,E.prototype.name="InvalidCharacterError";var btoa_1=btoa,cookies=utils.isStandardBrowserEnv()?{write:function(e,t,r,n,o,s){var i=[];i.push(e+"="+encodeURIComponent(t)),utils.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),utils.isString(n)&&i.push("path="+n),utils.isString(o)&&i.push("domain="+o),!0===s&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},btoa$1="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||btoa_1,xhr=function(e){return new Promise((function(t,r){var n=e.data,o=e.headers;utils.isFormData(n)&&delete o["Content-Type"];var s=new XMLHttpRequest,i="onreadystatechange",a=!1;if("test"===process.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in s||isURLSameOrigin(e.url)||(s=new window.XDomainRequest,i="onload",a=!0,s.onprogress=function(){},s.ontimeout=function(){}),e.auth){var c=e.auth.username||"",u=e.auth.password||"";o.Authorization="Basic "+btoa$1(c+":"+u)}if(s.open(e.method.toUpperCase(),buildURL(e.url,e.params,e.paramsSerializer),!0),s.timeout=e.timeout,s[i]=function(){if(s&&(4===s.readyState||a)&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in s?parseHeaders(s.getAllResponseHeaders()):null,o={data:e.responseType&&"text"!==e.responseType?s.response:s.responseText,status:1223===s.status?204:s.status,statusText:1223===s.status?"No Content":s.statusText,headers:n,config:e,request:s};settle(t,r,o),s=null}},s.onerror=function(){r(createError("Network Error",e,null,s)),s=null},s.ontimeout=function(){r(createError("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",s)),s=null},utils.isStandardBrowserEnv()){var l=cookies,f=(e.withCredentials||isURLSameOrigin(e.url))&&e.xsrfCookieName?l.read(e.xsrfCookieName):void 0;f&&(o[e.xsrfHeaderName]=f)}if("setRequestHeader"in s&&utils.forEach(o,(function(e,t){void 0===n&&"content-type"===t.toLowerCase()?delete o[t]:s.setRequestHeader(t,e)})),e.withCredentials&&(s.withCredentials=!0),e.responseType)try{s.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&s.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){s&&(s.abort(),r(e),s=null)})),void 0===n&&(n=null),s.send(n)}))},s=1e3,m=60*s,h=60*m,d=24*h,w=7*d,y=365.25*d,ms=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return parse(e);if("number"===r&&!1===isNaN(e))return t.long?fmtLong(e):fmtShort(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*y;case"weeks":case"week":case"w":return r*w;case"days":case"day":case"d":return r*d;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h;case"minutes":case"minute":case"mins":case"min":case"m":return r*m;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function fmtShort(e){var t=Math.abs(e);return t>=d?Math.round(e/d)+"d":t>=h?Math.round(e/h)+"h":t>=m?Math.round(e/m)+"m":t>=s?Math.round(e/s)+"s":e+"ms"}function fmtLong(e){var t=Math.abs(e);return t>=d?plural(e,t,d,"day"):t>=h?plural(e,t,h,"hour"):t>=m?plural(e,t,m,"minute"):t>=s?plural(e,t,s,"second"):e+" ms"}function plural(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}function setup(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){var s;function i(){if(i.enabled){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=i,a=Number(new Date),c=a-(s||a);o.diff=c,o.prev=s,o.curr=a,s=a,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(function(e,n){if("%%"===e)return e;u++;var s=r.formatters[n];if("function"==typeof s){var i=t[u];e=s.call(o,i),t.splice(u,1),u--}return e})),r.formatArgs.call(o,t),(o.log||r.log).apply(o,t)}}return i.namespace=e,i.enabled=r.enabled(e),i.useColors=r.useColors(),i.color=t(e),i.destroy=n,i.extend=o,"function"==typeof r.init&&r.init(i),r.instances.push(i),i}function n(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function o(e,t){return r(this.namespace+(void 0===t?":":t)+e)}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){r.enable("")},r.enable=function(e){var t;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(t=0;t<o;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var s=r.instances[t];s.enabled=r.enabled(s.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=ms,Object.keys(e).forEach((function(t){r[t]=e[t]})),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}var common=setup,browser=createCommonjsModule((function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":r(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(o=n))})),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=common(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}})),browser_1=browser.log,browser_2=browser.formatArgs,browser_3=browser.save,browser_4=browser.load,browser_5=browser.useColors,browser_6=browser.storage,browser_7=browser.colors,hasFlag=(e,t)=>{t=t||process.argv;const r=e.startsWith("-")?"":1===e.length?"-":"--",n=t.indexOf(r+e),o=t.indexOf("--");return-1!==n&&(-1===o||n<o)};const env=process.env;let forceColor;function translateLevel(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function supportsColor(e){if(!1===forceColor)return 0;if(hasFlag("color=16m")||hasFlag("color=full")||hasFlag("color=truecolor"))return 3;if(hasFlag("color=256"))return 2;if(e&&!e.isTTY&&!0!==forceColor)return 0;const t=forceColor?1:0;if("win32"===process.platform){const e=os.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in env)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in env)||"codeship"===env.CI_NAME?1:t;if("TEAMCITY_VERSION"in env)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(env.TEAMCITY_VERSION)?1:0;if("truecolor"===env.COLORTERM)return 3;if("TERM_PROGRAM"in env){const e=parseInt((env.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(env.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(env.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)?1:"COLORTERM"in env?1:(env.TERM,t)}function getSupportLevel(e){return translateLevel(supportsColor(e))}hasFlag("no-color")||hasFlag("no-colors")||hasFlag("color=false")?forceColor=!1:(hasFlag("color")||hasFlag("colors")||hasFlag("color=true")||hasFlag("color=always"))&&(forceColor=!0),"FORCE_COLOR"in env&&(forceColor=0===env.FORCE_COLOR.length||0!==parseInt(env.FORCE_COLOR,10));var supportsColor_1={supportsColor:getSupportLevel,stdout:getSupportLevel(process.stdout),stderr:getSupportLevel(process.stderr)},node=createCommonjsModule((function(e,t){t.init=function(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(){return process.stderr.write(util.format.apply(util,arguments)+"\n")},t.formatArgs=function(r){var n=this.namespace;if(this.useColors){var o=this.color,s="[3"+(o<8?o:"8;5;"+o),i="  ".concat(s,";1m").concat(n," [0m");r[0]=i+r[0].split("\n").join("\n"+i),r.push(s+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):tty.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{var r=supportsColor_1;r&&(r.stderr||r).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((function(e){return/^debug_/i.test(e)})).reduce((function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()})),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e}),{}),e.exports=common(t);var n=e.exports.formatters;n.o=function(e){return this.inspectOpts.colors=this.useColors,util.inspect(e,this.inspectOpts).replace(/\s*\n\s*/g," ")},n.O=function(e){return this.inspectOpts.colors=this.useColors,util.inspect(e,this.inspectOpts)}})),node_1=node.init,node_2=node.log,node_3=node.formatArgs,node_4=node.save,node_5=node.load,node_6=node.useColors,node_7=node.colors,node_8=node.inspectOpts,src=createCommonjsModule((function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=browser:e.exports=node})),URL=url.URL,Writable=stream.Writable,debug=src("follow-redirects"),SAFE_METHODS={GET:!0,HEAD:!0,OPTIONS:!0,TRACE:!0},eventHandlers=Object.create(null);function RedirectableRequest(e,t){Writable.call(this),e.headers=e.headers||{},this._options=e,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e.host&&(e.hostname||(e.hostname=e.host),delete e.host),t&&this.on("response",t);var r=this;if(this._onNativeResponse=function(e){r._processResponse(e)},!e.pathname&&e.path){var n=e.path.indexOf("?");n<0?e.pathname=e.path:(e.pathname=e.path.substring(0,n),e.search=e.path.substring(n))}this._performRequest()}function startTimer(e,t){clearTimeout(e._timeout),e._timeout=setTimeout((function(){e.emit("timeout")}),t)}function clearTimer(){clearTimeout(this._timeout)}function wrap(e){var t={maxRedirects:21,maxBodyLength:10485760},r={};return Object.keys(e).forEach((function(n){var o=n+":",s=r[o]=e[n],i=t[n]=Object.create(s);i.request=function(e,n,s){if("string"==typeof e){var i=e;try{e=urlToOptions(new URL(i))}catch(t){e=url.parse(i)}}else URL&&e instanceof URL?e=urlToOptions(e):(s=n,n=e,e={protocol:o});return"function"==typeof n&&(s=n,n=null),(n=Object.assign({maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},e,n)).nativeProtocols=r,assert.equal(n.protocol,o,"protocol mismatch"),debug("options",n),new RedirectableRequest(n,s)},i.get=function(e,t,r){var n=i.request(e,t,r);return n.end(),n}})),t}function noop(){}function urlToOptions(e){var t={protocol:e.protocol,hostname:e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:e.pathname+e.search,href:e.href};return""!==e.port&&(t.port=Number(e.port)),t}["abort","aborted","error","socket","timeout"].forEach((function(e){eventHandlers[e]=function(t){this._redirectable.emit(e,t)}})),RedirectableRequest.prototype=Object.create(Writable.prototype),RedirectableRequest.prototype.write=function(e,t,r){if(this._ending)throw new Error("write after end");if(!("string"==typeof e||"object"==typeof e&&"length"in e))throw new Error("data should be a string, Buffer or Uint8Array");"function"==typeof t&&(r=t,t=null),0!==e.length?this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,r)):(this.emit("error",new Error("Request body larger than maxBodyLength limit")),this.abort()):r&&r()},RedirectableRequest.prototype.end=function(e,t,r){if("function"==typeof e?(r=e,e=t=null):"function"==typeof t&&(r=t,t=null),e){var n=this,o=this._currentRequest;this.write(e,t,(function(){n._ended=!0,o.end(null,null,r)})),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,r)},RedirectableRequest.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},RedirectableRequest.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},RedirectableRequest.prototype.setTimeout=function(e,t){if(t&&this.once("timeout",t),this.socket)startTimer(this,e);else{var r=this;this._currentRequest.once("socket",(function(){startTimer(r,e)}))}return this.once("response",clearTimer),this.once("error",clearTimer),this},["abort","flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach((function(e){RedirectableRequest.prototype[e]=function(t,r){return this._currentRequest[e](t,r)}})),["aborted","connection","socket"].forEach((function(e){Object.defineProperty(RedirectableRequest.prototype,e,{get:function(){return this._currentRequest[e]}})})),RedirectableRequest.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(t){if(this._options.agents){var r=e.substr(0,e.length-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=t.request(this._options,this._onNativeResponse);for(var o in this._currentUrl=url.format(this._options),n._redirectable=this,eventHandlers)o&&n.on(o,eventHandlers[o]);if(this._isRedirect){var s=0,i=this,a=this._requestBodyBuffers;!function e(t){if(n===i._currentRequest)if(t)i.emit("error",t);else if(s<a.length){var r=a[s++];n.finished||n.write(r.data,r.encoding,e)}else i._ended&&n.end()}()}}else this.emit("error",new Error("Unsupported protocol "+e))},RedirectableRequest.prototype._processResponse=function(e){this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:e.statusCode});var t=e.headers.location;if(t&&!1!==this._options.followRedirects&&e.statusCode>=300&&e.statusCode<400){if(this._currentRequest.removeAllListeners(),this._currentRequest.on("error",noop),this._currentRequest.abort(),++this._redirectCount>this._options.maxRedirects)return void this.emit("error",new Error("Max redirects exceeded."));var r,n=this._options.headers;if(307!==e.statusCode&&!(this._options.method in SAFE_METHODS))for(r in this._options.method="GET",this._requestBodyBuffers=[],n)/^content-/i.test(r)&&delete n[r];if(!this._isRedirect)for(r in n)/^host$/i.test(r)&&delete n[r];var o=url.resolve(this._currentUrl,t);debug("redirecting to",o),Object.assign(this._options,url.parse(o)),this._isRedirect=!0,this._performRequest(),e.destroy()}else e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),this._requestBodyBuffers=[]};var followRedirects=wrap({http:http,https:https}),wrap_1=wrap;followRedirects.wrap=wrap_1;var _args=[["axios@0.18.0","/Users/yanqiong/Documents/shinny/tqsdk-js"]],_from="axios@0.18.0",_id="axios@0.18.0",_inBundle=!1,_integrity="sha1-MtU+SFHv3AoRmTts0AB4nXDAUQI=",_location="/axios",_phantomChildren={},_requested={type:"version",registry:!0,raw:"axios@0.18.0",name:"axios",escapedName:"axios",rawSpec:"0.18.0",saveSpec:null,fetchSpec:"0.18.0"},_requiredBy=["/"],_resolved="https://registry.npmjs.org/axios/-/axios-0.18.0.tgz",_spec="0.18.0",_where="/Users/yanqiong/Documents/shinny/tqsdk-js",author={name:"Matt Zabriskie"},browser$1={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},bugs={url:"https://github.com/axios/axios/issues"},bundlesize=[{path:"./dist/axios.min.js",threshold:"5kB"}],dependencies={"follow-redirects":"^1.3.0","is-buffer":"^1.1.5"},description="Promise based HTTP client for the browser and node.js",devDependencies={bundlesize:"^0.5.7",coveralls:"^2.11.9","es6-promise":"^4.0.5",grunt:"^1.0.1","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.0.0","grunt-contrib-nodeunit":"^1.0.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^19.0.0","grunt-karma":"^2.0.0","grunt-ts":"^6.0.0-beta.3","grunt-webpack":"^1.0.18","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^1.3.0","karma-chrome-launcher":"^2.0.0","karma-coverage":"^1.0.0","karma-firefox-launcher":"^1.0.0","karma-jasmine":"^1.0.2","karma-jasmine-ajax":"^0.1.13","karma-opera-launcher":"^1.0.0","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^1.1.0","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.7.0","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",sinon:"^1.17.4",typescript:"^2.0.3","url-search-params":"^0.6.1",webpack:"^1.13.1","webpack-dev-server":"^1.14.1"},homepage="https://github.com/axios/axios",keywords=["xhr","http","ajax","promise","node"],license="MIT",main="index.js",name="axios",repository={type:"git",url:"git+https://github.com/axios/axios.git"},scripts={build:"NODE_ENV=production grunt build",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",examples:"node ./examples/server.js",postversion:"git push && git push --tags",preversion:"npm test",start:"node ./sandbox/server.js",test:"grunt test && bundlesize",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},typings="./index.d.ts",version$1="0.18.0",_package={_args:_args,_from:_from,_id:_id,_inBundle:_inBundle,_integrity:_integrity,_location:_location,_phantomChildren:_phantomChildren,_requested:_requested,_requiredBy:_requiredBy,_resolved:_resolved,_spec:_spec,_where:_where,author:author,browser:browser$1,bugs:bugs,bundlesize:bundlesize,dependencies:dependencies,description:description,devDependencies:devDependencies,homepage:homepage,keywords:keywords,license:license,main:main,name:name,repository:repository,scripts:scripts,typings:typings,version:version$1},_package$1=Object.freeze({__proto__:null,_args:_args,_from:_from,_id:_id,_inBundle:_inBundle,_integrity:_integrity,_location:_location,_phantomChildren:_phantomChildren,_requested:_requested,_requiredBy:_requiredBy,_resolved:_resolved,_spec:_spec,_where:_where,author:author,browser:browser$1,bugs:bugs,bundlesize:bundlesize,dependencies:dependencies,description:description,devDependencies:devDependencies,homepage:homepage,keywords:keywords,license:license,main:main,name:name,repository:repository,scripts:scripts,typings:typings,version:version$1,default:_package}),pkg=getCjsExportFromNamespace(_package$1),httpFollow=followRedirects.http,httpsFollow=followRedirects.https,http_1=function(e){return new Promise((function(t,r){var n,o=e.data,s=e.headers;if(s["User-Agent"]||s["user-agent"]||(s["User-Agent"]="axios/"+pkg.version),o&&!utils.isStream(o)){if(Buffer.isBuffer(o));else if(utils.isArrayBuffer(o))o=new Buffer(new Uint8Array(o));else{if(!utils.isString(o))return r(createError("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));o=new Buffer(o,"utf-8")}s["Content-Length"]=o.length}var i=void 0;e.auth&&(i=(e.auth.username||"")+":"+(e.auth.password||""));var a=url.parse(e.url),c=a.protocol||"http:";if(!i&&a.auth){var u=a.auth.split(":");i=(u[0]||"")+":"+(u[1]||"")}i&&delete s.Authorization;var l="https:"===c,f=l?e.httpsAgent:e.httpAgent,d={path:buildURL(a.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method,headers:s,agent:f,auth:i};e.socketPath?d.socketPath=e.socketPath:(d.hostname=a.hostname,d.port=a.port);var p,h=e.proxy;if(!h&&!1!==h){var m=c.slice(0,-1)+"_proxy",_=process.env[m]||process.env[m.toUpperCase()];if(_){var g=url.parse(_);if(h={host:g.hostname,port:g.port},g.auth){var y=g.auth.split(":");h.auth={username:y[0],password:y[1]}}}}if(h&&(d.hostname=h.host,d.host=h.host,d.headers.host=a.hostname+(a.port?":"+a.port:""),d.port=h.port,d.path=c+"//"+a.hostname+(a.port?":"+a.port:"")+d.path,h.auth)){var v=new Buffer(h.auth.username+":"+h.auth.password,"utf8").toString("base64");d.headers["Proxy-Authorization"]="Basic "+v}e.transport?p=e.transport:0===e.maxRedirects?p=l?https:http:(e.maxRedirects&&(d.maxRedirects=e.maxRedirects),p=l?httpsFollow:httpFollow),e.maxContentLength&&e.maxContentLength>-1&&(d.maxBodyLength=e.maxContentLength);var b=p.request(d,(function(o){if(!b.aborted){clearTimeout(n),n=null;var s=o;switch(o.headers["content-encoding"]){case"gzip":case"compress":case"deflate":s=s.pipe(zlib.createUnzip()),delete o.headers["content-encoding"]}var i=o.req||b,a={status:o.statusCode,statusText:o.statusMessage,headers:o.headers,config:e,request:i};if("stream"===e.responseType)a.data=s,settle(t,r,a);else{var c=[];s.on("data",(function(t){c.push(t),e.maxContentLength>-1&&Buffer.concat(c).length>e.maxContentLength&&r(createError("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,i))})),s.on("error",(function(t){b.aborted||r(enhanceError(t,e,null,i))})),s.on("end",(function(){var n=Buffer.concat(c);"arraybuffer"!==e.responseType&&(n=n.toString("utf8")),a.data=n,settle(t,r,a)}))}}}));b.on("error",(function(t){b.aborted||r(enhanceError(t,e,null,b))})),e.timeout&&!n&&(n=setTimeout((function(){b.abort(),r(createError("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",b))}),e.timeout)),e.cancelToken&&e.cancelToken.promise.then((function(e){b.aborted||(b.abort(),r(e))})),utils.isStream(o)?o.pipe(b):b.end(o)}))},DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(e,t){!utils.isUndefined(e)&&utils.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function getDefaultAdapter(){var e;return"undefined"!=typeof XMLHttpRequest?e=xhr:"undefined"!=typeof process&&(e=http_1),e}var defaults={adapter:getDefaultAdapter(),transformRequest:[function(e,t){return normalizeHeaderName(t,"Content-Type"),utils.isFormData(e)||utils.isArrayBuffer(e)||utils.isBuffer(e)||utils.isStream(e)||utils.isFile(e)||utils.isBlob(e)?e:utils.isArrayBufferView(e)?e.buffer:utils.isURLSearchParams(e)?(setContentTypeIfUnset(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):utils.isObject(e)?(setContentTypeIfUnset(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],(function(e){defaults.headers[e]={}})),utils.forEach(["post","put","patch"],(function(e){defaults.headers[e]=utils.merge(DEFAULT_CONTENT_TYPE)}));var defaults_1=defaults;function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},InterceptorManager.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},InterceptorManager.prototype.forEach=function(e){utils.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var InterceptorManager_1=InterceptorManager,transformData=function(e,t,r){return utils.forEach(r,(function(r){e=r(e,t)})),e},isCancel=function(e){return!(!e||!e.__CANCEL__)},isAbsoluteURL=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},combineURLs=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e};function throwIfCancellationRequested(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var dispatchRequest=function(e){return throwIfCancellationRequested(e),e.baseURL&&!isAbsoluteURL(e.url)&&(e.url=combineURLs(e.baseURL,e.url)),e.headers=e.headers||{},e.data=transformData(e.data,e.headers,e.transformRequest),e.headers=utils.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),utils.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||defaults_1.adapter)(e).then((function(t){return throwIfCancellationRequested(e),t.data=transformData(t.data,t.headers,e.transformResponse),t}),(function(t){return isCancel(t)||(throwIfCancellationRequested(e),t&&t.response&&(t.response.data=transformData(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))};function Axios(e){this.defaults=e,this.interceptors={request:new InterceptorManager_1,response:new InterceptorManager_1}}Axios.prototype.request=function(e){"string"==typeof e&&(e=utils.merge({url:arguments[0]},arguments[1])),(e=utils.merge(defaults_1,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[dispatchRequest,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},utils.forEach(["delete","get","head","options"],(function(e){Axios.prototype[e]=function(t,r){return this.request(utils.merge(r||{},{method:e,url:t}))}})),utils.forEach(["post","put","patch"],(function(e){Axios.prototype[e]=function(t,r,n){return this.request(utils.merge(n||{},{method:e,url:t,data:r}))}}));var Axios_1=Axios;function Cancel(e){this.message=e}Cancel.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0;var Cancel_1=Cancel;function CancelToken(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new Cancel_1(e),t(r.reason))}))}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},CancelToken.source=function(){var e;return{token:new CancelToken((function(t){e=t})),cancel:e}};var CancelToken_1=CancelToken,spread=function(e){return function(t){return e.apply(null,t)}};function createInstance(e){var t=new Axios_1(e),r=bind(Axios_1.prototype.request,t);return utils.extend(r,Axios_1.prototype,t),utils.extend(r,t),r}var axios=createInstance(defaults_1);axios.Axios=Axios_1,axios.create=function(e){return createInstance(utils.merge(defaults_1,e))},axios.Cancel=Cancel_1,axios.CancelToken=CancelToken_1,axios.isCancel=isCancel,axios.all=function(e){return Promise.all(e)},axios.spread=spread;var axios_1=axios,default_1=axios;axios_1.default=default_1;var axios$1=axios_1,eventemitter3=createCommonjsModule((function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new o(n,s||e,i),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function i(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,o=[];if(0===this._eventsCount)return o;for(n in e=this._events)t.call(e,n)&&o.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,s=n.length,i=new Array(s);o<s;o++)i[o]=n[o].fn;return i},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,o,s,i){var a=r?r+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,o),!0;case 5:return l.fn.call(l.context,t,n,o,s),!0;case 6:return l.fn.call(l.context,t,n,o,s,i),!0}for(u=1,c=new Array(f-1);u<f;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var d,p=l.length;for(u=0;u<p;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),f){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;case 4:l[u].fn.call(l[u].context,t,n,o);break;default:if(!c)for(d=1,c=new Array(f-1);d<f;d++)c[d-1]=arguments[d];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,o){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return i(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||o&&!a.once||n&&a.context!==n||i(this,s);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==t||o&&!a[c].once||n&&a[c].context!==n)&&u.push(a[c]);u.length?this._events[s]=1===u.length?u[0]:u:i(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&i(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a})),IsEmptyObject=function(e){return e&&e.constructor===Object&&0===Object.keys(e).length},RandomStr=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),r="",n=0;n<e;n++)r+=t[62*Math.random()|0];return r};function _genList(e){for(var t=[],r=e.split("|"),n=0;n<r.length;n++)t.push(r[n].trim());return t}function _genItem(e,t){for(var r={},n=0;n<e.length;n++)r[e[n]]=t[n];return r}function _genTableRow(e,t,r,n){var o={state:e,state_detail:t,isRow:!1,row:null};switch(t){case"T":""===n.replace(/-/g,"")?o.state_detail="C":r[e]=_genList(n);break;case"C":""===n.replace(/-/g,"")?o.state_detail="S":(o.isRow=!0,o.row=_genItem(r[e],_genList(n)));break;case"S":""===n.replace(/-/g,"")&&(o.state="",o.state_detail="")}return o}var ParseSettlementContent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""===e)return e;var t=e.split("\n"),r="",n="",o={},s={positionClosed:"å¹³ä»æç» Position Closed",transactionRecords:"æäº¤è®°å½ Transaction Record",positions:"æä»æ±æ» Positions",positionsDetail:"æä»æç» Positions Detail",delivery:"äº¤å²æç»  Delivery"},i=[],a=[],c={account:{}};Object.entries(s).forEach((function(e){i.push(e[0]),a.push(e[1]),c[e[0]]=[]}));for(var u=0;u<t.length;u++){var l=t[u].trim();if("èµéç¶åµ  å¸ç§ï¼äººæ°å¸  Account Summary  Currencyï¼CNY"!==l){if(a.includes(l))r=i[a.indexOf(l)],n="T",u++;else if("A-S"===r){if(0===l.length||""===l.replace("-","")){r="";continue}l.match(/([\u4e00-\u9fa5][\u4e00-\u9fa5\s]+[\u4e00-\u9fa5])+/g);for(var f=l.match(/([A-Z][a-zA-Z\.\/\(\)\s]+)[:ï¼]+/g),d=l.match(/(-?[\d]+\.\d\d)/g),p=0;p<f.length;p++)c.account[f[p].split(/[:ï¼]/)[0]]=d[p]}else if(i.includes(r)){if(0===l.length){r="";continue}var h=_genTableRow(r,n,o,l);r=h.state,n=h.state_detail,h.isRow&&c[r].push(h.row)}}else r="A-S",u++}return c},TqWebsocket=function(_EventEmitter){function TqWebsocket(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck(this,TqWebsocket),(t=_possibleConstructorReturn(this,_getPrototypeOf(TqWebsocket).call(this))).urlList=e instanceof Array?e:[e],t.ws=null,t.queue=[],t.reconnect=!0,t.reconnectTask=null,t.reconnectInterval=r.reconnectInterval?r.reconnectInterval:3e3,t.reconnectMaxTimes=r.reconnectMaxTimes?r.reconnectMaxTimes:2,t.reconnectTimes=0,t.reconnectUrlIndex=0,t.STATUS={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},t.__init(),t}return _inherits(TqWebsocket,_EventEmitter),_createClass(TqWebsocket,[{key:"send",value:function(e){var t=JSON.stringify(e);this.isReady()?this.ws.send(t):this.queue.push(t)}},{key:"isReady",value:function(){return this.ws.readyState===WebSocket.OPEN}},{key:"__init",value:function __init(){this.ws=new WebSocket(this.urlList[this.reconnectUrlIndex]),this.reconnectUrlIndex===this.urlList.length-1&&(this.reconnectTimes+=1);var _this=this;this.ws.onmessage=function(message){var data=eval("("+message.data+")");_this.emit("message",data),setImmediate((function(){_this.ws.send('{"aid":"peek_message"}')}))},this.ws.onclose=function(e){console.log("close",e),_this.emit("close"),_this.queue=[],_this.reconnect&&(_this.reconnectMaxTimes<=_this.reconnectTimes?(clearTimeout(_this.reconnectTask),_this.emit("death",{msg:"è¶è¿éè¿æ¬¡æ°"+_this.reconnectMaxTimes})):_this.reconnectTask=setTimeout((function(){3===_this.ws.readyState&&(_this.reconnectUrlIndex=_this.reconnectUrlIndex+1<_this.urlList.length?_this.reconnectUrlIndex+1:0,_this.__init(),_this.emit("reconnect",{msg:"åèµ·éè¿ç¬¬ "+_this.reconnectTimes+" æ¬¡"}))}),_this.reconnectInterval))},this.ws.onerror=function(e){_this.emit("error",e),_this.ws.close()},this.ws.onopen=function(){for(_this.emit("open",{msg:"åèµ·éè¿ç¬¬ "+_this.reconnectTimes+" æ¬¡, æå"}),_this.reconnectTimes=0,_this.reconnectUrlIndex=0,this.reconnectTask&&clearTimeout(_this.reconnectTask);_this.queue.length>0&&1===_this.ws.readyState;)_this.ws.send(_this.queue.shift())}}},{key:"close",value:function(){this.ws.onclose=function(){},this.ws.close()}}]),TqWebsocket}(eventemitter3),TqTradeWebsocket=function(e){function t(e,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,o))).dm=r,n.req_login=null,n.init(),n}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this.on("message",(function(t){if("rtn_data"===t.aid){for(var r=e._separateNotifies(t.data),n=0;n<r.length;n++)e.emit("notify",r[n]);e.dm.mergeData(t.data)}else if("rtn_brokers"===t.aid)e.emit("rtn_brokers",t.brokers);else if("qry_settlement_info"===t.aid){var o=ParseSettlementContent(t.settlement_info);e.dm.mergeData({trade:_defineProperty({},t.user_name,{his_settlements:_defineProperty({},t.trading_day,o)})}),TQSDK.store&&TQSDK.store.setContent(t.user_name,t.trading_day,t.settlement_info)}})),this.on("reconnect",(function(){e.req_login&&e.send(e.req_login)}))}},{key:"_separateNotifies",value:function(e){for(var t=[],r=0;r<e.length;r++)if(e[r].notify){var n=e.splice(r--,1)[0].notify;for(var o in n)t.push(n[o])}return t}},{key:"send",value:function(e){"req_login"===e.aid&&(this.req_login=e),_get(_getPrototypeOf(t.prototype),"send",this).call(this,e)}}]),t}(TqWebsocket),TqQuoteWebsocket=function(e){function t(e,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,o))).dm=r,n.subscribe_quote=null,n.charts={},n.init(),n}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this.on("message",(function(t){"rtn_data"===t.aid&&e.dm.mergeData(t.data)})),this.on("reconnect",(function(t){for(var r in console.log(t),e.subscribe_quote&&e.send(e.subscribe_quote),e.charts)e.charts[r].view_width>0&&e.send(e.charts[r])}))}},{key:"send",value:function(e){"subscribe_quote"===e.aid?null!==this.subscribe_quote&&JSON.stringify(e.ins_list)===JSON.stringify(this.subscribe_quote.ins_list)||(this.subscribe_quote=e,_get(_getPrototypeOf(t.prototype),"send",this).call(this,e)):"set_chart"===e.aid&&(0===e.view_width?this.charts[e.chart_id]&&delete this.charts[e.chart_id]:this.charts[e.chart_id]=e,_get(_getPrototypeOf(t.prototype),"send",this).call(this,e))}}]),t}(TqWebsocket),TqRecvOnlyWebsocket=function(e){function t(e,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,o))).dm=r,n.init(),n}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this.on("message",(function(t){"rtn_data"===t.aid&&e.dm.mergeData(t.data)})),this.on("reconnect",(function(e){console.log(e)}))}}]),t}(TqWebsocket),QUOTE=function(){function e(){_classCallCheck(this,e),this.instrument_id="",this.datetime="",this._last_price="-",this.ask_price1="-",this.ask_volume1="-",this.bid_price1="-",this.bid_volume1="-",this.highest="-",this.lowest="-",this.open="-",this.close="-",this.average="-",this.volume="-",this.amount="-",this.open_interest="-",this.lower_limit="-",this.upper_limit="-",this.settlement="-",this.change="-",this.change_percent="-",this.strike_price=NaN,this.pre_open_interest="-",this.pre_close="-",this.pre_volume="-",this._pre_settlement="-",this.margin="-",this.commission="-"}return _createClass(e,[{key:"setChange",value:function(){Number.isFinite(this._last_price)&&Number.isFinite(this._pre_settlement)&&0!==this._pre_settlement&&(this.change=this._last_price-this._pre_settlement,this.change_percent=this.change/this._pre_settlement*100)}},{key:"last_price",set:function(e){this._last_price=e,this.setChange()},get:function(){return this._last_price}},{key:"pre_settlement",set:function(e){this._pre_settlement=e,this.setChange()},get:function(){return this._pre_settlement}}]),e}(),DataManager=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._epoch=0,e._data=r,e._diffs=[],e}return _inherits(t,e),_createClass(t,[{key:"mergeData",value:function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=Array.isArray(e)?e:[e];r&&(this._epoch+=1,this._diffs=o);var s=!0,i=!1,a=void 0;try{for(var c,u=o[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var l=c.value;null===l||IsEmptyObject(l)||t.MergeObject(this._data,l,this._epoch,n)}}catch(e){i=!0,a=e}finally{try{s||null==u.return||u.return()}finally{if(i)throw a}}r&&this._data._epoch===this._epoch&&this.emit("data",null)}},{key:"isChanging",value:function(e){if(Array.isArray(e)){for(var t=this._data,r=0;r<e.length;r++){if((t=t[e[r]])._epoch&&t._epoch===this._epoch)return!0;if(void 0===t)return!1}return!1}return!(!e||!e._epoch)&&e._epoch===this._epoch}},{key:"setDefault",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._data;return t.SetDefault(n,e,r)}},{key:"getByPath",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._data;return t.GetByPath(r,e)}}]),t}(eventemitter3);DataManager.SetDefault=function(e,t,r){for(var n=e,o=0;o<t.length;o++){if("string"!=typeof t[o]&&"number"!=typeof t[o]){console.error("SetDefault, pathArray ä¸­çåç´ å¿é æ¯ string or number, but pathArray = ",t);break}var s=t[o];if(s in n||(n[s]=o===t.length-1?r:{}),o===t.length-1)return n[s];n=n[s]}return n},DataManager.GetByPath=function(e,t){for(var r=e,n=0;n<t.length;n++)if(null==(r=r[t[n]]))return r;return r},DataManager.MergeObject=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];for(var o in t){var s=t[o],i=_typeof(s);if(["string","boolean","number"].includes(i))e[o]="NaN"===s?NaN:s;else if(null===s&&n)delete e[o];else if(Array.isArray(s))e[o]=s,s._epoch||Object.defineProperty(s,"_epoch",{configurable:!1,enumerable:!1,writable:!0}),s._epoch=r;else if("object"===i)if(e[o]=e[o]||("data"===o?[]:{}),"quotes"===o)for(var a in s){var c=s[a];null!==c?(e[o][a]||(e[o][a]=new QUOTE),DataManager.MergeObject(e[o][a],c,r,n)):n&&a&&delete e[o][a]}else DataManager.MergeObject(e[o],s,r,n)}e._epoch||Object.defineProperty(e,"_epoch",{configurable:!1,enumerable:!1,writable:!0}),e._epoch=r};var TQSDK=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.symbolsServerUrl,o=void 0===n?"https://openmd.shinnytech.com/t/md/symbols/latest.json":n,s=r.wsQuoteUrl,i=void 0===s?"wss://openmd.shinnytech.com/t/md/front/mobile":s,a=r.wsTradeUrl,c=void 0===a?"wss://opentd.shinnytech.com/trade/user0":a,u=r.clientSystemInfo,l=void 0===u?"":u,f=r.clientAppId,d=void 0===f?"":f,p=r.autoInit,h=void 0===p||p,m=r.data,_=void 0===m?{klines:{},quotes:{},charts:{},ticks:{},trade:{}}:m;_classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._insUrl=o,e._mdUrl=i,e._tdUrl=c,e.clientSystemInfo=l,e.clientAppIds=d,e._prefix="TQJS_";var g=_assertThisInitialized(e);return e.dm=new DataManager(_),e.dm.on("data",(function(){g.emit("rtn_data",null)})),e.brokers=null,e.trade_accounts={},e.isReady=!1,e.quotesWs=null,e.quotesInfo={},h&&e.init(),e}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this.initMdWebsocket(),this.initTdWebsocket()}},{key:"initMdWebsocket",value:function(){var e=this;axios$1.get(this._insUrl,{headers:{Accept:"application/json; charset=utf-8"}}).then((function(t){e.quotesInfo=t.data,e.isReady=!0,e.emit("ready"),e.emit("rtn_data",null)})).catch((function(t){return e.emit("error",t),console.error("Error: "+t.message),t})),this.quotesWs=new TqQuoteWebsocket(this._mdUrl,this.dm)}},{key:"initTdWebsocket",value:function(){var e=this;axios$1.get("https://files.shinnytech.com/broker-list.json",{headers:{Accept:"application/json; charset=utf-8"}}).then((function(t){e.brokers_list=t.data,e.brokers=Object.keys(t.data).filter((function(e){return!e.endsWith(" ")})).sort(),e.emit("rtn_brokers",e.brokers),console.log(e.brokers)})).catch((function(t){return e.emit("error",t),console.error("Error: "+t.message),t}))}},{key:"addWebSocket",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?new TqRecvOnlyWebsocket(e,this.dm):null}},{key:"addAccount",value:function(e,t,r){if(e&&t&&r){if(-1===this.brokers.indexOf(e))return void console.error("ä¸æ¯æè¯¥æè´§å¬å¸");if(!this.trade_accounts[t]){var n=new TqTradeWebsocket(this.brokers_list[e].url,this.dm),o=this;n.on("notify",(function(r){o.emit("notify",Object.assign(r,{bid:e,user_id:t}))})),this.trade_accounts[t]={bid:e,userId:t,password:r,ws:n}}return this.trade_accounts[t]}return null}},{key:"removeAccount",value:function(e,t){e&&t&&this.trade_accounts[t]&&(this.trade_accounts[t].ws.close(),delete this.trade_accounts[t],delete this.dm._data.trade[t])}},{key:"refreshAccount",value:function(e,t){e&&t&&this.trade_accounts[t]&&(this.trade_accounts[t].ws.send({aid:"qry_account_info"}),this.trade_accounts[t].ws.send({aid:"qry_account_register"}))}},{key:"refreshAccounts",value:function(){for(var e in this.trade_accounts)this.trade_accounts[e].ws.send({aid:"qry_account_info"}),this.trade_accounts[e].ws.send({aid:"qry_account_register"})}},{key:"updateData",value:function(e){this.dm.mergeData(e,!0,!1)}},{key:"getByPath",value:function(e){return this.dm.getByPath(e)}},{key:"getQuotesByInput",value:function(e){if("string"!=typeof e&&!e.input)return[];var t={input:"string"==typeof e?e.toLowerCase():e.input.toLowerCase(),instrument_id:!e.instrument_id||e.instrument_id,pinyin:!e.pinyin||e.pinyin,include_expired:!!e.include_expired&&e.include_expired,FUTURE:!e.future||!!e.future,FUTURE_INDEX:!!e.future_index&&!!e.future_index,FUTURE_CONT:!!e.future_cont&&!!e.future_cont,OPTION:!!e.option&&!!e.option,COMBINE:!!e.combine&&!!e.combine},r=function(e,t,r){return!(!e[t.class]||!e.include_expired&&(e.include_expired||t.expired))&&("instrument_id"===r?t.product_id.toLowerCase()===e.input||e.input.length>2&&t.instrument_id.toLowerCase().indexOf(e.input)>-1:"pinyin"===r&&t.py.split(",").indexOf(e.input)>-1)},n=[];if(t.instrument_id)for(var o in this.quotesInfo)r(t,this.quotesInfo[o],"instrument_id")&&n.push(o);if(t.pinyin)for(var s in this.quotesInfo)r(t,this.quotesInfo[s],"pinyin")&&n.push(s);return n}},{key:"getQuote",value:function(e){if(""===e)return{};var t=this.dm.setDefault(["quotes",e],new QUOTE);if(!t.class&&this.quotesInfo[e]){var r=t.last_price?t.last_price:this.quotesInfo[e].last_price;Object.assign(t,this.quotesInfo[e],{last_price:r})}return t}},{key:"setChart",value:function(e){var t={};e.trading_day_start||e.trading_day_count?(t.trading_day_start=e.trading_day_start?e.trading_day_start:0,t.trading_day_count=e.trading_day_count?e.trading_day_count:864e11):(t.view_width=e.view_width?e.view_width:500,e.left_kline_id?t.left_kline_id=e.left_kline_id:e.focus_datetime&&(t.focus_datetime=e.focus_datetime,t.focus_position=e.focus_position?e.focus_position:0)),this.quotesWs.send(Object.assign({aid:"set_chart",chart_id:e.chart_id?e.chart_id:this._prefix+"kline_chart",ins_list:e.ins_list?e.ins_list.join(","):e.symbol,duration:e.duration},t))}},{key:"getUser",value:function(e){var t="string"==typeof e?e:e.user_id;return t?this.dm._data.trade[t]:null}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=void 0===t?"users":t,n=e.user_id,o=void 0===n?"":n,s=e.currency,i=void 0===s?"CNY":s,a=e.symbol,c=void 0===a?"":a,u=e.order_id,l=void 0===u?"":u,f=e.trade_id,d=void 0===f?"":f,p=e.trading_day,h=void 0===p?"":p,m=e.chart_id,_=void 0===m?"":m,g=e.input,y=void 0===g?"":g,v=e.duration,b=void 0===v?0:v;if("users"===r)return Object.keys(this.trade_accounts);if(o){var w=this.get_user(o);if("user"===r)return w;if(["session","accounts","positions","orders","trades","his_settlements"].indexOf(r)>-1)return w&&w[r]?w[r]:null;if(w&&w[r+"s"]){var C="account"===r?i:"position"===r?c:"order"===r?l:"trade"===r?d:"his_settlement"===r?h:"";return w[r+"s"][C]}return null}return"quotes"===r?y?this.get_quotes_by_input(y):[]:"quote"===r?this.getQuote(c):"klines"===r?this.getKlines(c,b):"ticks"===r?this.getTicks(c):"charts"===r?this.dm.getByPath(["charts"]):"chart"===r?this.dm.getByPath(["charts",_]):void 0}},{key:"getKlines",value:function(e,t){if(""===e)return null;var r=this.dm.getByPath(["klines",e,t]);return r&&r.data&&-1!==r.last_id||(this.dm.mergeData({klines:_defineProperty({},e,_defineProperty({},t,{last_id:-1,data:{}}))},!1,!1),r=this.dm.getByPath(["klines",e,t])),r}},{key:"getTicks",value:function(e){if(""===e)return null;var t=this.dm.getByPath(["ticks",e]);return t&&t.data||this.dm.mergeData({ticks:_defineProperty({},e,{last_id:-1,data:{}})},!1,!1),this.dm.getByPath(["ticks",e])}},{key:"isLogined",value:function(e){var t=this.get({name:"session",user_id:e.user_id});return!(!t||!t.trading_day)}},{key:"isChanging",value:function(e,t){return e&&e._epoch?e._epoch===this.dm._epoch:"string"==typeof e&&this.dm.isChanging(e,t)}},{key:"insertOrder",value:function(e){if(!this.is_logined(e))return null;var t=this._prefix+RandomStr(8),r={user_id:e.user_id,orderId:t,exchange_id:e.exchange_id,instrument_id:e.ins_id,direction:e.direction,offset:e.offset,price_type:e.price_type?e.price_type:"LIMIT",limit_price:Number(e.limit_price),volume_condition:"ANY",time_condition:"ANY"===e.price_type?"IOC":"GFD"},n=Object.assign({aid:"insert_order",volume:e.volume},r);this.trade_accounts[e.user_id].ws.send(n);var o=Object.assign({volume_orign:e.volume,status:"ALIVE",volume_left:e.volume},r);return this.dm.mergeData({trade:_defineProperty({},e.user_id,{orders:_defineProperty({},t,o)})},!1,!1),this.get({name:"order",user_id:e.user_id,orderId:t})}},{key:"autoInsertOrder",value:function(e){if(!this.is_logined(e))return null;var t={user_id:e.user_id,price_type:e.price_type?e.price_type:"LIMIT",volume_condition:"ANY",time_condition:"ANY"===e.price_type?"IOC":"GFD",exchange_id:e.exchange_id,instrument_id:e.ins_id,direction:e.direction,limit_price:Number(e.limit_price)};if("SHFE"===e.exchange_id&&"CLOSE"===e.offset){var r=this.dm.getPosition(e.symbol,e.user_id),n=0;"BUY"===e.direction&&r.volume_short_today>0?n=Math.min(r.volume_short_today,e.volume):"SELL"===e.direction&&r.volume_long_today>0&&(n=Math.min(r.volume_long_today,e.volume)),n>0&&this.insert_order(Object.assign({offset:"CLOSETODAY",volume:n},t)),e.volume-n>0&&this.insert_order(Object.assign({offset:"CLOSE",volume:e.volume-n},t))}else this.insert_order(Object.assign({offset:e.offset,volume:e.volume},t))}},{key:"cancelOrder",value:function(e){this.trade_accounts[e.user_id].ws.send({aid:"cancel_order",user_id:e.user_id,order_id:e.order_id?e.order_id:e})}},{key:"login",value:function(e){this.trade_accounts[e.user_id].ws.send({aid:"req_login",bid:e.bid,user_name:e.user_id,password:e.password,client_system_info:this.clientSystemInfo,client_app_id:this.clientAppId})}},{key:"confirmSettlement",value:function(e){this.trade_accounts[e.user_id].ws.send({aid:"confirm_settlement"})}},{key:"transfer",value:function(e){this.trade_accounts[e.user_id].ws.send({aid:"req_transfer",bank_id:e.bank_id,bank_password:e.bank_password,future_account:e.future_account,future_password:e.future_password,currency:"CNY",amount:e.amount})}},{key:"hisSettlement",value:function(e){if(!t.store)return null;var r=this.dm.getByPath(["trade",e.user_id,"his_settlements",e.trading_day]);if(void 0===r){var n=this;r=t.store.getContent(e.user_id,e.trading_day).then((function(t){if(null===t)n.trade_accounts[e.user_id].ws.send({aid:"qry_settlement_info",trading_day:Number(e.trading_day)});else{var r=ParseSettlementContent(t);n.dm.mergeData({trade:_defineProperty({},e.user_id,{his_settlements:_defineProperty({},e.trading_day,r)})},!0,!1)}})).catch((function(e){console.error(e)}))}}},{key:"subscribeQuote",value:function(e){this.quotesWs.send({aid:"subscribe_quote",ins_list:Array.isArray(e)?e.join(","):e})}}]),t}(eventemitter3);return TQSDK.prototype.subscribe_quote=TQSDK.prototype.subscribeQuote,TQSDK.prototype.his_settlement=TQSDK.prototype.hisSettlement,TQSDK.prototype.confirm_settlement=TQSDK.prototype.confirmSettlement,TQSDK.prototype.add_account=TQSDK.prototype.addAccount,TQSDK.prototype.remove_account=TQSDK.prototype.removeAccount,TQSDK.prototype.update_data=TQSDK.prototype.updateData,TQSDK.prototype.get_by_path=TQSDK.prototype.getByPath,TQSDK.prototype.get_quotes_by_input=TQSDK.prototype.getQuotesByInput,TQSDK.prototype.get_quote=TQSDK.prototype.getQuote,TQSDK.prototype.set_chart=TQSDK.prototype.setChart,TQSDK.prototype.get_user=TQSDK.prototype.getUser,TQSDK.prototype.is_logined=TQSDK.prototype.isLogined,TQSDK.prototype.is_changed=TQSDK.prototype.isChanging,TQSDK.prototype.insert_order=TQSDK.prototype.insertOrder,TQSDK.prototype.auto_insert_order=TQSDK.prototype.autoInsertOrder,TQSDK.prototype.cancel_order=TQSDK.prototype.cancelOrder,TQSDK.TqWebsocket=TqWebsocket,TQSDK.DataManager=DataManager,TQSDK.version=version,TQSDK}));
