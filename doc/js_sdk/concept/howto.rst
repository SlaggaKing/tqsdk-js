.. _how_to:

交易策略
==========================================================

扩展模块是为实现用户交易策略服务的，根据实际应用场景的不同，可以采用不同方式实现交易策略。

下面以一个实际例子分别说明这两种不同的实现方式：

交易策略说明
-----------------------------------------------------------

5 日均线上穿 20 日均线时，买入开仓；5 日均线下穿 20 日均线时，卖出平仓。


方式一、程序化指标
-----------------------------------------------------------

program trading

program indicator


天勤软件中提出了程序化指标的概念，

// 要求在K线完成的时刻满足下单条件才会动作
trade_at_close


方式二、程序化交易策略
-----------------------------------------------------------


+ 在自定义指标中，添加交易策略
+ 在

一个扩展模块是一个 HTML 文件, 它通常包含:

* 引用 tq_sdk.js (天勤 javascript SDK)
* 一些 html 代码, 用于构成板块的UI界面
* 一些 javascript 代码, 用于实现业务逻辑 (也可以写在独立的js文件中，再通过 script 标签引入页面)
* (可选)其它第三方js/css文件

.. note::

    每个扩展模块应该包括一个唯一的 TQSDK 的实例，维护了一个到主程序的 websocket 连接, 扩展模块通过此接口与主程序通讯。

    不同的扩展模块之间完全隔离运行。


.. code-block:: javascript
    :caption: 实例化 TQSDK

        const TQ = new TQSDK();
        // 其余逻辑代码


文件存储
---------------------------------------------------------

所有的天勤 JavaScript 扩展模块文件都应该存储在安装目录下，具体位置在安装目录的 **extension/** 下。

系统指标文件位置： **extension/libs/ind**

用户自定义指标文件位置： **extension/libs/custom**

